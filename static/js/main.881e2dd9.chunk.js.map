{"version":3,"sources":["validation/ValidationRule.ts","state/useContainer.tsx","state/ConfigContainer.ts","state/FieldStateContainer.ts","state/ValuesContainer.ts","state/ExpressionContainer.ts","state/ShowIfContainer.ts","util.ts","display/Description.tsx","state/FormStateContainer.ts","state/ValidationContainer.ts","FormDef.ts","formElements/formElementTypes.tsx","display/Label.tsx","display/FieldChrome.tsx","state/ReferenceDataContainer.ts","formElements/input/Autocomplete.tsx","state/PaginationContainer.ts","formElements/pagination/Accordion.tsx","formElements/input/Dropdown.tsx","formElements/input/TextInput.tsx","formElements/output/Heading.tsx","formElements/output/Paragraph.tsx","formElements/input/ButtonGroup.tsx","formElements/pagination/Tabs.tsx","hooks/useSuggestion.ts","formElements/collection/List.tsx","formElements/ChildFormElements.tsx","Form.tsx","index.tsx"],"names":["validationRuleMap","required","validate","value","length","defaultMessage","email","isEmail","alpha","isAlpha","numeric","isNumeric","alphanumeric","isAlphanumeric","currency","isCurrency","createContainer","useHook","Context","React","createContext","Provider","props","initialState","react_default","a","createElement","children","useContainer","useContext","Error","container","defaultConfig","showErrors","showErrorsDelay","disableNextWhenErrors","ConfigContainer","userConfig","arguments","undefined","config","Object","objectSpread","FieldStateContainer","_useState","useState","_useState2","slicedToArray","fieldStates","setFieldStates","setEventNow","path","event","nextFieldStates","produce","draftFieldStates","draftFieldState","eventTimes","Date","now","get","selectedLabel","label","fieldState","focus","valueChanged","blur","ValuesContainer","fieldStateContainer","formValues","setFormValues","setValue","nextFormValues","draftFormValues","set","console","log","JSON","stringify","getValue","addToCollection","oldCollection","newCollection","concat","toConsumableArray","deleteFromCollection","index","slice","getCollectionSize","collection","jexl","addTransform","val","toUpperCase","toLowerCase","addBinaryOp","left","right","ExpressionContainer","configContainer","valuesContainer","evaluate","fieldDef","expression","fieldValue","context","evalSync","expressionValidations","validIf","invalidIf","requiredIf","ShowIfContainer","expressionContainer","shouldShow","showIf","some","createPath","parentPath","fieldId","Description","id","className","text","FormStateContainer","formState","setFormState","nextClicked","nextFormStates","draftFormState","clearNextClicked","submitClicked","nextOrSubmit","ValidationContainer","formStateContainer","showIfContainer","nextTick","setNextTick","useEffect","setTimeout","validation","reduce","message","constraint","validationRule","isValidationExpresionDef","expressionValidation","name","validateConstraint","shouldShowErrors","timeHasPassedAndShouldShowError","time","validateAndShouldShow","hasErrorsRecursively","childFieldDef","type","childPath","formElementCollectionTypes","hasOwnProperty","size","Label","htmlFor","error","FieldChrome","def","attributes","Label_Label","description","Description_Description","ReferenceDataContainer","referenceDataDef","inline","referenceData","setReferenceData","http","forEach","httpReferenceDataDef","axios","then","response","data","draftReferenceData","defaultAutocompleteAttributes","options","multiple","labelKey","valueKey","postfixSearchIcon","PaginationContainer","validationContainer","setPath","_useState3","_useState4","pages","setPages","_useState5","_useState6","currentPageIndex","setCurrentPageIndex","firstShownPage","findIndex","page","lastShownPage","findLastIndex","currentIsFirst","currentIsLast","currentPageHasErrors","disableNext","setUp","setupPages","previousClicked","i","pageDef","formElementNonCollectionTypes","accordion","paginationContainer","currentPageRef","useRef","definition","scrollCurrentPageIntoView","current","window","scroll","top","getBoundingClientRect","goToPage","previous","next","role","aria-multiselectable","map","key","ref","onClick","ChildFormElements_ChildFormElements","childFormElements","aria-label","classNames","disabled","dropdown","referenceDataContainer","formValuesContainer","referenceDataOptions","FieldChrome_FieldChrome","onChange","currentTarget","aria-describedby","onFocus","onBlur","option","Math","random","toString","substring","textInput","heading","level","paragraph","buttonGroup","setFocus","checked","tabs","tabsRef","scrollIntoView","pill","href","tabIndex","aria-disabled","autocomplete","cursor","setCursor","_useSuggestion","suggestions","setSuggestions","httpSuggestions","setHttpSuggestions","inlineSuggestions","setInlineSuggestions","_useState7","_useState8","inputValue","setInputValue","_useState9","_useState10","showSuggestions","setShowSuggestions","inputChanged","newInputValue","lowerInputValue","trim","lowerSelectedLabel","matchingInlineOptions","filter","includes","url","clear","selectOption","useSuggestion","inputContainerRef","suggestionsContainerRef","document","body","addEventListener","handlePotentialOutsideClick","removeEventListener","contains","target","handleInputChange","changedValue","handleBlur","newTarget","activeElement","handleFocus","handleInputKeyDown","keyCode","esm","_ref","onKeyDown","index_esm","icon","Search","placement","_ref2","style","data-placement","suggestion","list","times","n","s","v","ordinal","itemLabel","aria-hidden","formElementTypes","ChildFormElements","elementDef","Child","foundType","warn","lookupElement","Form","formDef","elements","ReactDOM","render","Form_Form","getElementById","catch"],"mappings":"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","file":"static/js/main.881e2dd9.chunk.js","sourcesContent":["import isAlpha from 'validator/lib/isAlpha'\r\nimport isAlphanumeric from 'validator/lib/isAlphanumeric'\r\nimport isCurrency from 'validator/lib/isCurrency'\r\nimport isEmail from 'validator/lib/isEmail'\r\nimport isNumeric from 'validator/lib/isNumeric'\r\n\r\ninterface ValidationRule {\r\n\tvalidate: (value: string, args?: string | string[]) => boolean,\r\n\tdefaultMessage: string\r\n}\r\n\r\nexport const validationRuleMap: { [name: string]: ValidationRule } = {\r\n\trequired: {\r\n\t\tvalidate: (value: string) => !(value == null || value.length <= 0 || value === ''),\r\n\t\tdefaultMessage: 'This field is required'\r\n\t},\r\n\temail: {\r\n\t\tvalidate: (value: string) => isEmail(value),\r\n\t\tdefaultMessage: 'This field must be an email address'\r\n\t},\r\n\talpha: {\r\n\t\tvalidate: (value: string) => isAlpha(value),\r\n\t\tdefaultMessage: 'This field must be only letters'\r\n\t},\r\n\tnumeric: {\r\n\t\tvalidate: (value: string) => isNumeric(value),\r\n\t\tdefaultMessage: 'This field must be only numbers'\r\n\t},\r\n\talphanumeric: {\r\n\t\tvalidate: (value: string) => isAlphanumeric(value),\r\n\t\tdefaultMessage: 'This field must be only letters and numbers'\r\n\t},\r\n\tcurrency: {\r\n\t\tvalidate: (value: string) => isCurrency(value),\r\n\t\tdefaultMessage: 'This field must be a currency amount'\r\n\t}\r\n}","import React from 'react'\r\n\r\nexport interface ContainerProviderProps<State = any> {\r\n\tinitialState?: State\r\n\tchildren: React.ReactNode\r\n}\r\n\r\nexport interface Container<Value, State = any> {\r\n\tProvider: React.ComponentType<ContainerProviderProps<State>>\r\n\tuseContainer: () => Value\r\n}\r\n\r\nexport function createContainer<Value, State = any>(useHook: (initialState?: State) => Value): Container<Value, State> {\r\n\tlet Context = React.createContext<Value | null>(null)\r\n\r\n\tfunction Provider(props: ContainerProviderProps<State>) {\r\n\t\tlet value = useHook(props.initialState)\r\n\t\treturn <Context.Provider value={value}>{props.children}</Context.Provider>\r\n\t}\r\n\r\n\tfunction useContainer(): Value {\r\n\t\tlet value = React.useContext(Context)\r\n\t\tif (value === null) {\r\n\t\t\tthrow new Error('Component must be wrapped with <Container.Provider>')\r\n\t\t}\r\n\t\treturn value\r\n\t}\r\n\r\n\treturn {Provider, useContainer}\r\n}\r\n\r\nexport function useContainer<Value, State = any>(container: Container<Value, State>): Value {\r\n\treturn container.useContainer()\r\n}","import {createContainer} from './useContainer'\r\n\r\n\r\ntype showErrors = 'immediately' | 'onFocus' | 'onValueChanged' | 'onBlur' | 'nextOrSummit'\r\n\r\nexport interface Config {\r\n\tshowErrors: showErrors\r\n\tshowErrorsDelay: number //milliseconds\r\n\tdisableNextWhenErrors: boolean\r\n}\r\n\r\nconst defaultConfig: Config = {\r\n\tshowErrors: 'onFocus',\r\n\tshowErrorsDelay: 500,\r\n\tdisableNextWhenErrors: false\r\n}\r\n\r\nexport const ConfigContainer = createContainer((userConfig = {}) => {\r\n\tconst config = {...defaultConfig, ...userConfig}\r\n\treturn {config}\r\n})","import produce from 'immer'\r\nimport {useState} from 'react'\r\nimport {createContainer} from './useContainer'\r\n\r\ninterface FieldStates {\r\n\t[path: string]: FieldState\r\n}\r\n\r\ninterface FieldState {\r\n\tselectedLabel?: string,\r\n\teventTimes: EventTimes\r\n}\r\n\r\ntype EventTimes = {\r\n\t[Event in Events]: number; //Date.now() when event first happened on the field\r\n}\r\ntype Events = 'focus' | 'valueChanged' | 'blur'\r\n\r\nexport const FieldStateContainer = createContainer(() => {\r\n\tconst [fieldStates, setFieldStates] = useState<FieldStates>({})\r\n\r\n\tconst get = (path: string): FieldState => fieldStates[path] || {eventTimes: {}}\r\n\r\n\tconst selectedLabel = (path: string, label: string) => {\r\n\t\tconst nextFieldStates = produce<FieldStates>(fieldStates, draftFieldStates => {\r\n\t\t\t\tconst fieldState: FieldState = draftFieldStates[path] || {}\r\n\t\t\t\tfieldState.selectedLabel = label\r\n\t\t\t\tdraftFieldStates[path] = fieldState\r\n\t\t\t}\r\n\t\t)\r\n\t\tsetFieldStates(nextFieldStates)\r\n\t}\r\n\r\n\tconst setEventNow = (path: string, event: Events) => {\r\n\t\tconst nextFieldStates = produce<FieldStates>(fieldStates, draftFieldStates => {\r\n\t\t\t\tconst draftFieldState = draftFieldStates[path] || {eventTimes: {}}\r\n\t\t\t\tif (!draftFieldState.eventTimes[event]) {\r\n\t\t\t\t\tdraftFieldState.eventTimes[event] = Date.now()\r\n\t\t\t\t}\r\n\t\t\t\tdraftFieldStates[path] = draftFieldState\r\n\t\t\t}\r\n\t\t)\r\n\t\tsetFieldStates(nextFieldStates)\r\n\t}\r\n\tconst focus = (path: string) => setEventNow(path, 'focus')\r\n\tconst valueChanged = (path: string) => setEventNow(path, 'valueChanged')\r\n\tconst blur = (path: string) => setEventNow(path, 'blur')\r\n\r\n\treturn {get, selectedLabel, focus, valueChanged, blur}\r\n})","import produce from 'immer'\r\nimport get from 'lodash-es/get'\r\nimport set from 'lodash-es/set'\r\nimport {useState} from 'react'\r\nimport {FieldStateContainer} from './FieldStateContainer'\r\nimport {createContainer, useContainer} from './useContainer'\r\n\r\nexport const ValuesContainer = createContainer((initialState = {}) => {\r\n\tconst fieldStateContainer = useContainer(FieldStateContainer)\r\n\tconst [formValues, setFormValues] = useState<{}>(initialState)\r\n\r\n\tconst setValue = (path: string, value: any) => {\r\n\t\tconst nextFormValues = produce(formValues, draftFormValues => {\r\n\t\t\tset(draftFormValues, path, value)\r\n\t\t})\r\n\t\tsetFormValues(nextFormValues)\r\n\t\tfieldStateContainer.valueChanged(path)\r\n\t\tconsole.log('formValues:', JSON.stringify(nextFormValues, null, 2))\r\n\t}\r\n\r\n\tfunction getValue(path: string): string {\r\n\t\treturn get(formValues, path)\r\n\t}\r\n\r\n\tconst addToCollection = (path: string) => {\r\n\t\tconst nextFormValues = produce(formValues, draftFormValues => {\r\n\t\t\tconst oldCollection = get(draftFormValues, path, [])\r\n\t\t\tconst newCollection = [...oldCollection, {}]\r\n\t\t\tset(draftFormValues, path, newCollection)\r\n\t\t})\r\n\t\tsetFormValues(nextFormValues)\r\n\t}\r\n\tconst deleteFromCollection = (path: string, index: number) => {\r\n\t\tconst nextFormValues = produce(formValues, draftFormValues => {\r\n\t\t\tconst oldCollection = get(draftFormValues, path)\r\n\t\t\tconst newCollection = [...oldCollection.slice(0, index), ...oldCollection.slice(index + 1)]\r\n\t\t\tset(draftFormValues, path, newCollection)\r\n\t\t})\r\n\t\tsetFormValues(nextFormValues)\r\n\t}\r\n\tconst getCollectionSize = (path: string) => {\r\n\t\tconst collection = get(formValues, path)\r\n\t\treturn collection ? collection.length : 0\r\n\t}\r\n\treturn {formValues, setValue, getValue, addToCollection, deleteFromCollection, getCollectionSize}\r\n})","import jexl from 'jexl'\r\nimport isAlpha from 'validator/lib/isAlpha'\r\nimport isAlphanumeric from 'validator/lib/isAlphanumeric'\r\nimport isCurrency from 'validator/lib/isCurrency'\r\nimport isEmail from 'validator/lib/isEmail'\r\nimport isNumeric from 'validator/lib/isNumeric'\r\nimport {FormElementDef} from '../FormDef'\r\nimport {validationRuleMap} from '../validation/ValidationRule'\r\nimport {ConfigContainer} from './ConfigContainer'\r\nimport {createContainer, useContainer} from './useContainer'\r\nimport {ValuesContainer} from './ValuesContainer'\r\n\r\n//Basic transforms\r\njexl.addTransform('toUpperCase', (val) => val.toUpperCase())\r\njexl.addTransform('toLowerCase', (val) => val.toLowerCase())\r\n\r\n//Transform as a boolean validation\r\njexl.addTransform('isAlpha', (val) => val && isAlpha(val))\r\njexl.addTransform('isAlphanumeric', (val) => val && isAlphanumeric(val))\r\njexl.addTransform('isCurrency', (val) => val && isCurrency(val))\r\njexl.addTransform('isEmail', (val) => val && isEmail(val))\r\njexl.addTransform('isNumeric', (val) => val && isNumeric(val))\r\n\r\n//case-insensitive string equality\r\njexl.addBinaryOp('_=', 20, (left, right) => left.toLowerCase() === right.toLowerCase())\r\n\r\ninterface ValidationExpression {\r\n\tvalidate: (path: string, fieldDef: FormElementDef<{}>, expression: string) => boolean,\r\n\tdefaultMessage: string\r\n}\r\n\r\nfunction useExpression() {\r\n\tconst configContainer = useContainer(ConfigContainer)\r\n\tconst valuesContainer = useContainer(ValuesContainer)\r\n\r\n\r\n\tconst evaluate = <T>(path: string, fieldDef: FormElementDef<{}>, expression: string): T => {\r\n\t\tconst fieldValue = valuesContainer.getValue(path)\r\n\t\tconst context = {\r\n\t\t\tformValues: valuesContainer.formValues,\r\n\t\t\tfieldValue,\r\n\t\t\tvalue: fieldValue,\r\n\t\t\tconfig: configContainer.config,\r\n\t\t\tfieldDef\r\n\t\t}\r\n\t\treturn jexl.evalSync(expression, context)\r\n\t}\r\n\r\n\tconst expressionValidations: { [name: string]: ValidationExpression } = {\r\n\t\tvalidIf: {\r\n\t\t\tvalidate: (path: string, fieldDef: FormElementDef<{}>, expression: string) => evaluate(path, fieldDef, expression),\r\n\t\t\tdefaultMessage: 'This field is invalid' // The form editor should make the user enter message as this does not give the user any information about why the field is invalid\r\n\t\t},\r\n\t\tinvalidIf: {\r\n\t\t\tvalidate: (path: string, fieldDef: FormElementDef<{}>, expression: string) => !evaluate(path, fieldDef, expression),\r\n\t\t\tdefaultMessage: 'This field is invalid' // As with validIf form editor should make the user enter message as this does not give the user any information about why the field is invalid\r\n\t\t},\r\n\t\trequiredIf: {\r\n\t\t\tvalidate: (path: string, fieldDef: FormElementDef<{}>, expression: string) => {\r\n\t\t\t\tif (evaluate(path, fieldDef, expression)) {\r\n\t\t\t\t\treturn validationRuleMap.required.validate(valuesContainer.getValue(path))\r\n\t\t\t\t}\r\n\t\t\t\treturn true\r\n\t\t\t},\r\n\t\t\tdefaultMessage: validationRuleMap.required.defaultMessage\r\n\t\t}\r\n\t}\r\n\r\n\treturn {evaluate, expressionValidations}\r\n}\r\n\r\nexport const ExpressionContainer = createContainer(useExpression)","import {FormElementDef} from '../FormDef'\r\nimport {ExpressionContainer} from './ExpressionContainer'\r\nimport {createContainer, useContainer} from './useContainer'\r\n\r\nexport const ShowIfContainer = createContainer(() => {\r\n\tconst expressionContainer = useContainer(ExpressionContainer)\r\n\r\n\tfunction shouldShow(path: string, fieldDef: FormElementDef<{}>): boolean {\r\n\t\tif (!fieldDef.showIf) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn fieldDef.showIf.some(expression => expressionContainer.evaluate(path, fieldDef, expression))\r\n\t}\r\n\r\n\treturn {shouldShow}\r\n})","export const createKey = () => (Math.random() + 1).toString(36).substring(2)\r\n\r\nexport const ordinal = (n: number): string => {\r\n\tconst s = ['th', 'st', 'nd', 'rd'],\r\n\t\tv = n % 100\r\n\treturn n + (s[(v - 20) % 10] || s[v] || s[0])\r\n}\r\n\r\nexport const createPath = (parentPath: string, fieldId?: string): string => {\r\n\tif (!fieldId) {\r\n\t\treturn parentPath\r\n\t}\r\n\tif (parentPath !== '') {\r\n\t\treturn parentPath + '.' + fieldId\r\n\t}\r\n\treturn fieldId\r\n\r\n}","import React from 'react'\r\n\r\ninterface DescriptionProps {\r\n\tpath: string,\r\n\ttext: string\r\n}\r\n\r\nexport const Description = (props: DescriptionProps) => (\r\n\t<div id={props.path + '_description'} className=\"pt-2 text-muted description\">{props.text}</div>\r\n)","import produce from 'immer'\r\nimport {useState} from 'react'\r\nimport {createContainer} from './useContainer'\r\n\r\ntype FormState = {\r\n\tnextClicked?: number\r\n\tsubmitClicked?: number\r\n\tnextOrSubmitClicked?: number //Date.now() when field first got focused\r\n}\r\n\r\nexport const FormStateContainer = createContainer(() => {\r\n\tconst [formState, setFormState] = useState<FormState>({})\r\n\r\n\tconst nextClicked = () => {\r\n\t\tconst nextFormStates = produce(formState, draftFormState => {\r\n\t\t\t\tif (!draftFormState.nextClicked) {\r\n\t\t\t\t\tdraftFormState.nextClicked = Date.now()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t\tsetFormState(nextFormStates)\r\n\t}\r\n\r\n\tconst clearNextClicked = () => {\r\n\t\tconst nextFormStates = produce(formState, draftFormState => {\r\n\t\t\t\tdraftFormState.nextClicked = undefined\r\n\t\t\t}\r\n\t\t)\r\n\t\tsetFormState(nextFormStates)\r\n\r\n\t}\r\n\r\n\tconst submitClicked = () => {\r\n\t\tconst nextFormStates = produce(formState, draftFormState => {\r\n\t\t\t\tif (!draftFormState.submitClicked) {\r\n\t\t\t\t\tdraftFormState.submitClicked = Date.now()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t\tsetFormState(nextFormStates)\r\n\t}\r\n\r\n\tconst nextOrSubmit = (): boolean => {\r\n\t\treturn !!formState.nextClicked || !!formState.submitClicked\r\n\t}\r\n\r\n\treturn {formState, nextClicked, clearNextClicked, submitClicked, nextOrSubmit}\r\n})","import {useEffect, useState} from 'react'\r\nimport {FormElementDef, isValidationExpresionDef, ValidationConstraintDef} from '../FormDef'\r\nimport {isTypeACollection} from '../formElements/formElementTypes'\r\nimport {createPath} from '../util'\r\nimport {validationRuleMap} from '../validation/ValidationRule'\r\nimport {ConfigContainer} from './ConfigContainer'\r\nimport {ExpressionContainer} from './ExpressionContainer'\r\nimport {FieldStateContainer} from './FieldStateContainer'\r\nimport {FormStateContainer} from './FormStateContainer'\r\nimport {ShowIfContainer} from './ShowIfContainer'\r\nimport {createContainer, useContainer} from './useContainer'\r\nimport {ValuesContainer} from './ValuesContainer'\r\n\r\nexport const ValidationContainer = createContainer(() => {\r\n\tconst configContainer = useContainer(ConfigContainer)\r\n\tconst valuesContainer = useContainer(ValuesContainer)\r\n\tconst fieldStateContainer = useContainer(FieldStateContainer)\r\n\tconst formStateContainer = useContainer(FormStateContainer)\r\n\tconst expressionContainer = useContainer(ExpressionContainer)\r\n\tconst showIfContainer = useContainer(ShowIfContainer)\r\n\r\n\tconst [nextTick, setNextTick] = useState<number>(0)\r\n\tuseEffect(() => {\r\n\t\tif (nextTick > Date.now()) {\r\n\t\t\tsetTimeout(() => setNextTick(0), nextTick - Date.now())\r\n\t\t}\r\n\t}, [nextTick])\r\n\r\n\tconst config = configContainer.config\r\n\r\n\tconst validate = (path: string, fieldDef: FormElementDef<{}>): string | null => {\r\n\t\tif (!fieldDef.validation || fieldDef.validation.length <= 0) {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\treturn fieldDef.validation.reduce<string | null>((message, constraint): string | null => {\r\n\t\t\tif (message != null) {\r\n\t\t\t\treturn message\r\n\t\t\t}\r\n\t\t\treturn validateConstraint(constraint, path, fieldDef)\r\n\t\t}, null)\r\n\t}\r\n\r\n\tfunction validateConstraint(constraint: ValidationConstraintDef | string, path: string, fieldDef: FormElementDef<{}>): string | null {\r\n\t\tif (typeof constraint === 'string') {\r\n\t\t\tconst fieldValue = valuesContainer.getValue(path) || ''\r\n\t\t\tconst validationRule = validationRuleMap[constraint]\r\n\t\t\tif (!validationRule.validate(fieldValue)) {\r\n\t\t\t\treturn validationRule.defaultMessage\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t} else if (!isValidationExpresionDef(constraint)) {\r\n\t\t\tconst fieldValue = valuesContainer.getValue(path) || ''\r\n\t\t\tconst validationRule = validationRuleMap[constraint.name]\r\n\t\t\tif (!validationRule.validate(fieldValue)) {\r\n\t\t\t\treturn constraint.message || validationRule.defaultMessage\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t} else {\r\n\t\t\tconst expressionValidation = expressionContainer.expressionValidations[constraint.name]\r\n\t\t\tif (!expressionValidation.validate(path, fieldDef, constraint.expression)) {\r\n\t\t\t\treturn constraint.message || expressionValidation.defaultMessage\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n\tconst validateAndShouldShow = (path: string, fieldDef: FormElementDef<{}>): string | null => {\r\n\t\treturn shouldShowErrors(path, fieldDef) ? validate(path, fieldDef) : null\r\n\t}\r\n\r\n\tconst shouldShowErrors = (path: string, fieldDef: FormElementDef<{}>): boolean => {\r\n\t\tif (formStateContainer.nextOrSubmit() || config.showErrors === 'immediately') {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tconst eventTimes = fieldStateContainer.get(path).eventTimes || {}\r\n\t\tif (config.showErrors === 'onFocus' && eventTimes.focus) {\r\n\t\t\treturn timeHasPassedAndShouldShowError(eventTimes.focus)\r\n\t\t}\r\n\t\tif (config.showErrors === 'onValueChanged' && eventTimes.valueChanged) {\r\n\t\t\treturn timeHasPassedAndShouldShowError(eventTimes.valueChanged)\r\n\t\t}\r\n\t\tif (config.showErrors === 'onBlur' && eventTimes.blur) {\r\n\t\t\treturn timeHasPassedAndShouldShowError(eventTimes.blur)\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst timeHasPassedAndShouldShowError = (time: number) => {\r\n\t\tif (!config.showErrorsDelay || config.showErrorsDelay === 0) {\r\n\t\t\treturn true\r\n\t\t} else if ((time + config.showErrorsDelay) < Date.now()) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\tsetNextTick(time + config.showErrorsDelay)\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tconst hasErrorsRecursively = (path: string, fieldDef?: FormElementDef<{}>): boolean => {\r\n\t\tif (!fieldDef || !showIfContainer.shouldShow(path, fieldDef)) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tif (validate(path, fieldDef) != null) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tif (fieldDef.children) {\r\n\t\t\treturn fieldDef.children.some((childFieldDef) => {\r\n\t\t\t\tconst childPath = createPath(path, childFieldDef.fieldId)\r\n\t\t\t\tif (!showIfContainer.shouldShow(childPath, childFieldDef)) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tif (isTypeACollection(childFieldDef.type)) {\r\n\t\t\t\t\tconst size = valuesContainer.getCollectionSize(childPath)\r\n\t\t\t\t\tfor (let index = 0; index < size; index++) {\r\n\t\t\t\t\t\tif (hasErrorsRecursively(childPath + '[' + index + ']', childFieldDef)) {\r\n\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn hasErrorsRecursively(childPath, childFieldDef)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\treturn {validate, shouldShowErrors, validateAndShouldShow, hasErrorsRecursively}\r\n})","import {Config} from './state/ConfigContainer'\r\n\r\nexport default interface FormDef {\r\n\telements: FormElementDef<{}>[]\r\n\tconfig?: Config\r\n\treferenceData?: ReferenceDataDef\r\n}\r\n\r\nexport interface FormElementDef<Attributes> {\r\n\ttype: string,\r\n\tattributes: Attributes,\r\n\tfieldId?: string,\r\n\tchildren?: Array<FormElementDef<any>>\r\n\tvalidation?: Array<string | ValidationConstraintDef>\r\n\tshowIf?: string[]\r\n\thidden: boolean\r\n}\r\n\r\nexport type ValidationConstraintDef = ValidationRuleDef | ValidationExpresionDef\r\n\r\nexport function isValidationExpresionDef(constraint: ValidationConstraintDef): constraint is ValidationExpresionDef {\r\n\treturn (constraint as ValidationExpresionDef).expression !== undefined\r\n}\r\n\r\nexport interface ValidationRuleDef {\r\n\tname: string,\r\n\targuments?: string[],\r\n\tmessage?: string\r\n}\r\n\r\nexport interface ValidationExpresionDef {\r\n\tname: string,\r\n\texpression: string,\r\n\tmessage?: string\r\n}\r\n\r\nexport interface ReferenceDataDef {\r\n\tinline?: {\r\n\t\t[name: string]: any\r\n\t}\r\n\thttp?: {\r\n\t\tname: string,\r\n\t\turl: string,\r\n\t\tmethod?: 'get' | 'GET' | 'post' | 'POST',\r\n\t\tbaseURL?: string\r\n\t}[]\r\n}\r\n\r\n","import React from 'react'\r\nimport {List} from './collection/List'\r\nimport {Autocomplete} from './input/Autocomplete'\r\nimport {ButtonGroup} from './input/ButtonGroup'\r\nimport {Dropdown} from './input/Dropdown'\r\nimport {TextInput} from './input/TextInput'\r\nimport {Heading} from './output/Heading'\r\nimport {Paragraph} from './output/Paragraph'\r\nimport {Accordion} from './pagination/Accordion'\r\nimport {Tabs} from './pagination/Tabs'\r\n\r\ninterface FormElementTypesMap {\r\n\t[type: string]: React.ReactNode\r\n}\r\n\r\nexport const formElementNonCollectionTypes: FormElementTypesMap = {\r\n\t'accordion': Accordion,\r\n\t'dropdown': Dropdown,\r\n\t'textInput': TextInput,\r\n\t'heading': Heading,\r\n\t'paragraph': Paragraph,\r\n\t'buttonGroup': ButtonGroup,\r\n\t'tabs': Tabs,\r\n\t'autocomplete': Autocomplete\r\n}\r\n\r\nexport const formElementCollectionTypes: FormElementTypesMap = {\r\n\t'list': List\r\n}\r\n\r\nexport const formElementTypes: FormElementTypesMap = {...formElementNonCollectionTypes, ...formElementCollectionTypes}\r\n\r\nexport function lookupElement(type: string): React.ReactNode {\r\n\tconst foundType = formElementTypes[type]\r\n\tif (!foundType) {\r\n\t\tconsole.warn('Could not find form element type:' + type)\r\n\t\treturn () => <div>Could not find form element type <code>{type}</code>.</div>\r\n\t}\r\n\treturn foundType\r\n}\r\n\r\nexport function isTypeACollection(type: string): boolean {\r\n\treturn formElementCollectionTypes.hasOwnProperty(type)\r\n}","import React from 'react'\r\n\r\ninterface LabelProps {\r\n\ttext: string,\r\n\thtmlFor: string,\r\n\terror: boolean\r\n}\r\n\r\nexport const Label = (props: LabelProps) => <label htmlFor={props.htmlFor} className={'mr-2 h5 ' + (props.error ? 'text-danger' : '')}>{props.text}</label>","import React from 'react'\r\nimport {FormElementDef} from '../FormDef'\r\nimport {useContainer} from '../state/useContainer'\r\nimport {ValidationContainer} from '../state/ValidationContainer'\r\nimport {Description} from './Description'\r\nimport {Label} from './Label'\r\n\r\n\r\ninterface FieldChromeProps {\r\n\tpath: string\r\n\tdef: FormElementDef<any>\r\n}\r\n\r\nexport const FieldChrome: React.FC<FieldChromeProps> = (props) => {\r\n\tconst validationContainer = useContainer(ValidationContainer)\r\n\tconst error = validationContainer.validateAndShouldShow(props.path, props.def)\r\n\r\n\treturn (<div className=\"form-group pt-2\">\r\n\t\t{props.def.attributes.label && <Label htmlFor={props.path} text={props.def.attributes.label} error={!!error}/>}\r\n\t\t{props.children}\r\n\t\t{error && <div className=\"error-message text-danger pt-2\">{error}</div>}\r\n\t\t{props.def.attributes.description && <Description path={props.path} text={props.def.attributes.description}/>}\r\n\t</div>)\r\n}","import axios from 'axios'\r\nimport produce from 'immer'\r\nimport {useEffect, useState} from 'react'\r\nimport {ReferenceDataDef} from '../FormDef'\r\nimport {createContainer} from './useContainer'\r\n\r\nexport const ReferenceDataContainer = createContainer((referenceDataDef: ReferenceDataDef = {}) => {\r\n\tconst [referenceData, setReferenceData] = useState<{ [name: string]: any }>(referenceDataDef.inline || {})\r\n\r\n\tuseEffect(() => {\r\n\t\treferenceDataDef.http!.forEach(httpReferenceDataDef => {\r\n\t\t\taxios(httpReferenceDataDef)\r\n\t\t\t\t.then(function (response) {\r\n\t\t\t\t\tset(httpReferenceDataDef.name, response.data)\r\n\t\t\t\t})\r\n\t\t})\r\n\t}, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\tconst set = (name: string, data: any) => {\r\n\t\tsetReferenceData(produce(referenceData, draftReferenceData => {\r\n\t\t\tdraftReferenceData[name] = data\r\n\t\t}))\r\n\t}\r\n\r\n\treturn {referenceData, set}\r\n})","import Octicon, {Search} from '@primer/octicons-react'\r\nimport React, {KeyboardEvent, useEffect, useRef, useState} from 'react'\r\nimport {Manager, Popper, Reference} from 'react-popper'\r\nimport {FieldChrome} from '../../display/FieldChrome'\r\nimport {useSuggestion} from '../../hooks/useSuggestion'\r\nimport {FieldStateContainer} from '../../state/FieldStateContainer'\r\nimport {useContainer} from '../../state/useContainer'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\nexport interface AutocompleteAttributes {\r\n\tlabel: string\r\n\tdescription: string\r\n\tinfo?: string\r\n\toptions?: any[]\r\n\treferenceDataOptions?: string\r\n\tmultiple?: boolean\r\n\tlabelKey?: string\r\n\tvalueKey?: string\r\n\thttp?: { url?: string }\r\n\tpostfixSearchIcon?: boolean\r\n\r\n}\r\n\r\nconst defaultAutocompleteAttributes = {\r\n\toptions: [],\r\n\tmultiple: false,\r\n\tlabelKey: 'label',\r\n\tvalueKey: 'value',\r\n\tpostfixSearchIcon: true\r\n}\r\n\r\nexport const Autocomplete = (props: FormElementProps<AutocompleteAttributes>) => {\r\n\tconst attributes = {...defaultAutocompleteAttributes, ...props.definition.attributes}\r\n\r\n\tconst fieldStateContainer = useContainer(FieldStateContainer)\r\n\tconst [cursor, setCursor] = useState<number>(-1)\r\n\r\n\tconst {inputValue, inputChanged, suggestions, showSuggestions, clear, selectOption} = useSuggestion(props.path, attributes)\r\n\r\n\tconst inputContainerRef = useRef<HTMLDivElement>(null)\r\n\tconst suggestionsContainerRef = useRef<HTMLDivElement>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showSuggestions && suggestions && suggestions.length > 0) {\r\n\t\t\tinputContainerRef.current!.scrollIntoView()\r\n\t\t}\r\n\t}, [showSuggestions, suggestions])\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.body.addEventListener('touchend', handlePotentialOutsideClick!)\r\n\t\tdocument.body.addEventListener('click', handlePotentialOutsideClick!)\r\n\t\treturn () => {\r\n\t\t\tdocument.body.removeEventListener('touchend', handlePotentialOutsideClick!)\r\n\t\t\tdocument.body.removeEventListener('click', handlePotentialOutsideClick!)\r\n\t\t}\r\n\t})\r\n\r\n\tconst handlePotentialOutsideClick = (event: Event) => {\r\n\t\tif (inputContainerRef && !inputContainerRef.current!.contains(event.target as Node)\r\n\t\t\t&& suggestionsContainerRef && !suggestionsContainerRef.current!.contains(event.target as Node)) {\r\n\t\t\tclear()\r\n\t\t}\r\n\t}\r\n\tconst handleInputChange = (changedValue: string) => {\r\n\t\tinputChanged(changedValue)\r\n\t\tsetCursor(-1)\r\n\t}\r\n\tconst handleSelectionClicked = (option: any) => {\r\n\t\tselectOption(option)\r\n\t\tsetCursor(-1)\r\n\t}\r\n\tconst handleBlur = () => {\r\n\t\tfieldStateContainer.blur(props.path)\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst newTarget = document.activeElement\r\n\t\t\tif (!inputContainerRef.current!.contains(newTarget) && !suggestionsContainerRef.current!.contains(newTarget)) {\r\n\t\t\t\tclear()\r\n\t\t\t}\r\n\t\t}, 1)// Have to wait 1 ms so that document.activeElement is not body\r\n\t}\r\n\tconst handleFocus = () => {\r\n\t\tfieldStateContainer.focus(props.path)\r\n\t\tif (inputValue && inputValue.length > 0) {\r\n\t\t\thandleInputChange(inputValue)\r\n\t\t}\r\n\t}\r\n\tconst handleInputKeyDown = (event: KeyboardEvent) => {\r\n\t\tif (event.keyCode === 38 && cursor > 0) { // up\r\n\t\t\tsetCursor(cursor - 1)\r\n\t\t} else if (event.keyCode === 40 && cursor < suggestions.length - 1) { // down\r\n\t\t\tsetCursor(cursor + 1)\r\n\t\t} else if (event.keyCode === 13 && cursor >= 0 && cursor < suggestions.length) { // enter\r\n\t\t\tselectOption(suggestions[cursor])\r\n\t\t} else if (event.keyCode === 27) { // esc\r\n\t\t\tclear()\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn <FieldChrome path={props.path} def={props.definition}>\r\n\t\t<Manager>\r\n\t\t\t<Reference>\r\n\t\t\t\t{({ref}) => (<div ref={inputContainerRef} className=\"input-group\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tref={ref}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\tid={props.path}\r\n\t\t\t\t\t\t\taria-describedby={props.path + '_description'}\r\n\t\t\t\t\t\t\tvalue={inputValue || ''}\r\n\t\t\t\t\t\t\tonChange={event => handleInputChange(event.target.value)}\r\n\t\t\t\t\t\t\tonKeyDown={handleInputKeyDown}\r\n\t\t\t\t\t\t\tonFocus={handleFocus}\r\n\t\t\t\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{attributes.postfixSearchIcon && <div className=\"input-group-append\" onClick={() => inputChanged(inputValue)}>\r\n\t\t\t\t\t\t\t<span className=\"input-group-text\">\r\n\t\t\t\t\t\t\t\t<Octicon icon={Search} size='small'/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Reference>\r\n\t\t\t<Popper placement=\"bottom-start\">\r\n\t\t\t\t{({ref, style, placement}) => (\r\n\t\t\t\t\t<div ref={suggestionsContainerRef}>\r\n\t\t\t\t\t\t<div ref={ref} style={style} className=\"popper\" data-placement={placement}>\r\n\t\t\t\t\t\t\t{showSuggestions && suggestions && suggestions.length > 0 && <div className=\"dropdown-menu show\">\r\n\t\t\t\t\t\t\t\t{suggestions.map((suggestion, index) => {\r\n\t\t\t\t\t\t\t\t\tconst value = suggestion[attributes.valueKey]\r\n\t\t\t\t\t\t\t\t\tconst label = suggestion[attributes.labelKey]\r\n\t\t\t\t\t\t\t\t\treturn <button className={'dropdown-item' + (cursor === index ? ' active' : '')} key={value + label} onClick={() => handleSelectionClicked(suggestion)}>{label}</button>\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Popper>\r\n\t\t</Manager>\r\n\t</FieldChrome>\r\n}","import {findLastIndex} from 'lodash-es'\r\nimport {useState} from 'react'\r\nimport {FormElementDef} from '../FormDef'\r\nimport {ConfigContainer} from './ConfigContainer'\r\nimport {FormStateContainer} from './FormStateContainer'\r\nimport {ShowIfContainer} from './ShowIfContainer'\r\nimport {createContainer, useContainer} from './useContainer'\r\nimport {ValidationContainer} from './ValidationContainer'\r\n\r\nexport const PaginationContainer = createContainer((initialState = {}) => {\r\n\tconst configContainer = useContainer(ConfigContainer)\r\n\tconst validationContainer = useContainer(ValidationContainer)\r\n\tconst formStateContainer = useContainer(FormStateContainer)\r\n\tconst showIfContainer = useContainer(ShowIfContainer)\r\n\tconst [path, setPath] = useState<string>('')\r\n\tconst [pages, setPages] = useState<FormElementDef<any>[]>([])\r\n\tconst [currentPageIndex, setCurrentPageIndex] = useState<number>(-1)\r\n\r\n\tconst setUp = (path: string, setupPages: FormElementDef<any>[]) => {\r\n\t\tsetPath(path)\r\n\t\tsetPages(setupPages)\r\n\t\tif (currentPageIndex < 0) {\r\n\t\t\tsetCurrentPageIndex(setupPages.findIndex(page => showIfContainer.shouldShow(path, page)))\r\n\t\t}\r\n\t}\r\n\r\n\tconst firstShownPage = pages.findIndex(page => showIfContainer.shouldShow(path, page))\r\n\tconst lastShownPage = findLastIndex(pages, page => showIfContainer.shouldShow(path, page))\r\n\r\n\tconst currentIsFirst = currentPageIndex === firstShownPage\r\n\tconst currentIsLast = currentPageIndex === lastShownPage\r\n\r\n\tconst currentPageHasErrors = () => validationContainer.hasErrorsRecursively(path, pages[currentPageIndex])\r\n\tconst disableNext = configContainer.config.disableNextWhenErrors && currentPageHasErrors()\r\n\r\n\tconst previousClicked = () => {\r\n\t\tfor (let i = currentPageIndex - 1; i >= 0; i--) {\r\n\t\t\tconst pageDef = pages[i]\r\n\t\t\tif (pageDef && showIfContainer.shouldShow(path, pageDef)) {\r\n\t\t\t\tformStateContainer.clearNextClicked()\r\n\t\t\t\tsetCurrentPageIndex(i)\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst nextClicked = () => {\r\n\t\tif (currentPageHasErrors()) {\r\n\t\t\tformStateContainer.nextClicked()\r\n\t\t} else {\r\n\t\t\tfor (let i = currentPageIndex + 1; i < pages.length; i++) {\r\n\t\t\t\tconst pageDef = pages[i]\r\n\t\t\t\tif (pageDef && showIfContainer.shouldShow(path, pageDef)) {\r\n\t\t\t\t\tformStateContainer.clearNextClicked()\r\n\t\t\t\t\tsetCurrentPageIndex(i)\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst submitClicked = () => {\r\n\t\tif (currentPageHasErrors()) {\r\n\t\t\tformStateContainer.submitClicked()\r\n\t\t} else {\r\n\t\t\tconsole.log('Submit')\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn {setUp, currentPageIndex, setCurrentPageIndex, currentIsFirst, currentIsLast, currentPageHasErrors, disableNext, previousClicked, nextClicked, submitClicked}\r\n})","import classNames from 'classnames'\r\nimport React, {useEffect, useRef} from 'react'\r\nimport {FormElementDef} from '../../FormDef'\r\nimport {PaginationContainer} from '../../state/PaginationContainer'\r\nimport {ShowIfContainer} from '../../state/ShowIfContainer'\r\nimport {useContainer} from '../../state/useContainer'\r\nimport {ChildFormElements} from '../ChildFormElements'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\nexport const Accordion = (props: FormElementProps<void>) => {\r\n\tconst showIfContainer = useContainer(ShowIfContainer)\r\n\tconst paginationContainer = useContainer(PaginationContainer)\r\n\r\n\tconst currentPageRef = useRef<HTMLDivElement>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tprops.definition.children && paginationContainer.setUp(props.path, props.definition.children)\r\n\t}, [props.definition.children,props.path, paginationContainer ])\r\n\r\n\tif (!props.definition.children) {\r\n\t\treturn null\r\n\t}\r\n\r\n\r\n\tconst scrollCurrentPageIntoView = () => {\r\n\t\tif (currentPageRef && currentPageRef.current) {\r\n\t\t\twindow.scroll({top: currentPageRef.current.getBoundingClientRect().top - 100})\r\n\t\t}\r\n\t}\r\n\r\n\tconst goToPage = (index: number) => {\r\n\t\tpaginationContainer.setCurrentPageIndex(index)\r\n\t\tscrollCurrentPageIntoView()\r\n\t}\r\n\r\n\tconst previous = () => {\r\n\t\tpaginationContainer.previousClicked()\r\n\t\tscrollCurrentPageIntoView()\r\n\t}\r\n\r\n\tconst next = () => {\r\n\t\tpaginationContainer.nextClicked()\r\n\t\tscrollCurrentPageIntoView()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"accordion\" role=\"tablist\" aria-multiselectable=\"true\">\r\n\t\t\t{props.definition.children!.map((page, index) => showIfContainer.shouldShow(props.path, page) && <div className=\"card\" key={props.path + '_PAGE_' + index}>\r\n\t\t\t\t\t{paginationContainer.currentPageIndex === index && <div ref={currentPageRef}/>}\r\n\t\t\t\t\t<div className=\"card-header cursor-pointer\" onClick={() => goToPage(index)}>\r\n\t\t\t\t\t\t<h3 className=\"d-inline\">{page.attributes.label}</h3>{index < paginationContainer.currentPageIndex && <button className=\"link-button text-muted px-1\" onClick={() => goToPage(index)}><u>edit</u></button>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{paginationContainer.currentPageIndex === index && <div className=\"card-body m-1\">\r\n\t\t\t\t\t\t{page.children && <ChildFormElements childFormElements={page.children as FormElementDef<any>[]} parentPath={props.parentPath}/>}\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t\t\t\t<nav aria-label=\"Page navigation\">\r\n\t\t\t\t\t\t\t\t\t<ul className=\"pagination mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t{!paginationContainer.currentIsFirst && <li className=\"page-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button className=\"page-link\" onClick={previous}>Previous</button>\r\n\t\t\t\t\t\t\t\t\t\t</li>}\r\n\t\t\t\t\t\t\t\t\t\t{!paginationContainer.currentIsLast && <li className={classNames('page-item', {disabled: paginationContainer.disableNext})}>\r\n\t\t\t\t\t\t\t\t\t\t\t<button className=\"page-link\" onClick={next} disabled={paginationContainer.disableNext}>Next</button>\r\n\t\t\t\t\t\t\t\t\t\t</li>}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{paginationContainer.currentIsLast && <div className=\"col\">\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-right\" onClick={paginationContainer.submitClicked}>Submit</button>\r\n\t\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react'\nimport {FieldChrome} from '../../display/FieldChrome'\nimport {FieldStateContainer} from '../../state/FieldStateContainer'\nimport {ReferenceDataContainer} from '../../state/ReferenceDataContainer'\nimport {useContainer} from '../../state/useContainer'\nimport {ValuesContainer} from '../../state/ValuesContainer'\nimport {createKey} from '../../util'\nimport {FormElementProps} from '../FormElementProps'\n\nexport interface DropdownAttributes {\n\tlabel: string\n\tdescription: string\n\tinfo?: string\n\toptions?: string[]\n\treferenceDataOptions?: string\n}\n\ninterface Option {\n\tvalue: string | number,\n\tlabel: string\n}\n\ntype Data = string | number\n\nexport const Dropdown = (props: FormElementProps<DropdownAttributes>) => {\n\tconst referenceDataContainer = useContainer(ReferenceDataContainer)\n\tconst formValuesContainer = useContainer(ValuesContainer)\n\tconst fieldStateContainer = useContainer(FieldStateContainer)\n\tlet options: Array<Option | Data> = props.definition.attributes.options || []\n\tif (props.definition.attributes.referenceDataOptions) {\n\t\toptions = options.concat(referenceDataContainer.referenceData[props.definition.attributes.referenceDataOptions])\n\t}\n\treturn <FieldChrome path={props.path} def={props.definition}>\n\t\t<select\n\t\t\tclassName=\"form-control custom-select\"\n\t\t\tid={props.definition.fieldId}\n\t\t\tvalue={formValuesContainer.getValue(props.path) || ''}\n\t\t\tonChange={event => formValuesContainer.setValue(props.path, event.currentTarget.value)}\n\t\t\taria-describedby={props.definition.fieldId + '_description'}\n\t\t\tonFocus={() => fieldStateContainer.focus(props.path)}\n\t\t\tonBlur={() => fieldStateContainer.blur(props.path)}\n\t\t>\n\t\t\t<option value=\"\"/>\n\t\t\t{options.map((option) => {\n\t\t\t\tconst label = typeof option === 'object' ? option.label : option\n\t\t\t\tconst value = typeof option === 'object' ? option.value : option\n\t\t\t\treturn <option value={value} key={value || createKey()}>{label}</option>\n\t\t\t})}\n\t\t</select>\n\t</FieldChrome>\n}","import React from 'react'\nimport {FieldChrome} from '../../display/FieldChrome'\nimport {FieldStateContainer} from '../../state/FieldStateContainer'\nimport {useContainer} from '../../state/useContainer'\nimport {ValuesContainer} from '../../state/ValuesContainer'\nimport {FormElementProps} from '../FormElementProps'\n\ninterface TextInputAttributes {\n\tlabel: string\n\tdescription: string\n\tinfo?: string\n}\n\nexport const TextInput = (props: FormElementProps<TextInputAttributes>) => {\n\tconst formValuesContainer = useContainer(ValuesContainer)\n\tconst fieldStateContainer = useContainer(FieldStateContainer)\n\n\treturn (<FieldChrome path={props.path} def={props.definition}>\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tclassName=\"form-control\"\n\t\t\tid={props.path}\n\t\t\taria-describedby={props.path + '_description'}\n\t\t\tvalue={formValuesContainer.getValue(props.path) || ''}\n\t\t\tonChange={event => formValuesContainer.setValue(props.path, event.currentTarget.value)}\n\t\t\tonFocus={() => fieldStateContainer.focus(props.path)}\n\t\t\tonBlur={() => fieldStateContainer.blur(props.path)}\n\t\t/>\n\t</FieldChrome>)\n}","import React from 'react'\nimport {FormElementProps} from '../FormElementProps'\n\ninterface HeadingAttributes {\n\tlevel: number\n\ttext: string\n}\n\nexport const Heading = (props: FormElementProps<HeadingAttributes>) =>\n\tReact.createElement('h' + props.definition.attributes.level, null, props.definition.attributes.text)","import React from 'react'\nimport {FormElementProps} from '../FormElementProps'\n\n\ninterface ParagraphAttributes {\n\ttext: string\n}\n\nexport const Paragraph = (props: FormElementProps<ParagraphAttributes>) => <p>{props.definition.attributes.text}</p>","import React, {useState} from 'react'\nimport {FieldChrome} from '../../display/FieldChrome'\nimport {FieldStateContainer} from '../../state/FieldStateContainer'\nimport {useContainer} from '../../state/useContainer'\nimport {ValuesContainer} from '../../state/ValuesContainer'\nimport {FormElementProps} from '../FormElementProps'\n\ninterface ButtonGroupAttributes {\n\tlabel: string\n\tdescription?: string\n\tinfo?: string\n\toptions: string[]\n}\n\nexport const ButtonGroup = (props: FormElementProps<ButtonGroupAttributes>) => {\n\tconst formValuesContainer = useContainer(ValuesContainer)\n\tconst fieldStateContainer = useContainer(FieldStateContainer)\n\tconst value = formValuesContainer.getValue(props.path)\n\tconst [focus, setFocus] = useState<number | null>(null)\n\n\treturn (\n\t\t<FieldChrome path={props.path} def={props.definition}>\n\t\t\t<div className=\"btn-group-wrapper\"\n\t\t\t\t onFocus={() => fieldStateContainer.focus(props.path)}\n\t\t\t\t onBlur={() => fieldStateContainer.blur(props.path)}\n\t\t\t>\n\t\t\t\t<div className=\"btn-group btn-group-toggle\">\n\t\t\t\t\t{props.definition.attributes.options.map((option, index) => (\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={'btn btn-outline-primary' + (value === option ? ' active' : '') + (focus === index ? ' focus' : '')}\n\t\t\t\t\t\t\tkey={props.path + '_OPTION_' + option}\n\t\t\t\t\t\t\tonFocus={() => setFocus(index)}\n\t\t\t\t\t\t\tonBlur={() => setFocus(null)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\tvalue={option}\n\t\t\t\t\t\t\t\tchecked={option === value}\n\t\t\t\t\t\t\t\tonChange={event => formValuesContainer.setValue(props.path, event.currentTarget.value)}\n\t\t\t\t\t\t\t/>{option}\n\t\t\t\t\t\t</label>))\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</FieldChrome>)\n}","import classNames from 'classnames'\r\nimport React, {useEffect, useRef} from 'react'\r\nimport {FormElementDef} from '../../FormDef'\r\nimport {PaginationContainer} from '../../state/PaginationContainer'\r\nimport {ShowIfContainer} from '../../state/ShowIfContainer'\r\nimport {useContainer} from '../../state/useContainer'\r\nimport {ChildFormElements} from '../ChildFormElements'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\ninterface TabAttributes {\r\n\tpill?: boolean\r\n}\r\n\r\n\r\nexport const Tabs = (props: FormElementProps<TabAttributes>) => {\r\n\tconst showIfContainer = useContainer(ShowIfContainer)\r\n\tconst paginationContainer = useContainer(PaginationContainer)\r\n\tconst tabsRef = useRef<HTMLDivElement>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tprops.definition.children && paginationContainer.setUp(props.path, props.definition.children)\r\n\t}, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n\tuseEffect(() => {\r\n\t\tif (tabsRef && tabsRef.current && tabsRef.current.getBoundingClientRect().top < 0) {\r\n\t\t\ttabsRef.current.scrollIntoView()\r\n\t\t}\r\n\t}, [paginationContainer.currentPageIndex])\r\n\r\n\tif (!props.definition.children) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tif (paginationContainer.currentPageIndex < 0) {\r\n\t\treturn null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"card rounded-0\">\r\n\t\t\t<div className=\"card-header\" ref={tabsRef}>\r\n\t\t\t\t<ul className={'nav ' + (props.definition.attributes.pill ? 'nav-pills card-header-pills' : 'nav-tabs card-header-tabs')}>\r\n\t\t\t\t\t{props.definition.children!.map((page, index) => {\r\n\t\t\t\t\t\tif (!showIfContainer.shouldShow(props.path, page)) {\r\n\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst key = props.path + '_PAGE_' + index\r\n\t\t\t\t\t\t//The bootstrap btn-link doesn't style the same as a link with a href when used as nav-link\r\n\t\t\t\t\t\t/* eslint-disable jsx-a11y/anchor-is-valid, no-script-url */\r\n\t\t\t\t\t\tif (index < paginationContainer.currentPageIndex) {\r\n\t\t\t\t\t\t\treturn <li className=\"nav-item\" key={key}>\r\n\t\t\t\t\t\t\t\t<a className=\"nav-link\" href=\"javascript:void(0)\" onClick={() => paginationContainer.setCurrentPageIndex(index)}>{page.attributes.label}</a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/* eslint-enable no-script-url, jsx-a11y/anchor-is-valid */\r\n\t\t\t\t\t\tif (index === paginationContainer.currentPageIndex) {\r\n\t\t\t\t\t\t\treturn <li className=\"nav-item\" key={key}>\r\n\t\t\t\t\t\t\t\t<button className=\"nav-link active\">{page.attributes.label}</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (index > paginationContainer.currentPageIndex) {\r\n\t\t\t\t\t\t\treturn <li className=\"nav-item\" key={key}>\r\n\t\t\t\t\t\t\t\t<button className=\"nav-link disabled\" tabIndex={-1} aria-disabled=\"true\">{page.attributes.label}</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn null\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"card-body\">\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<ChildFormElements childFormElements={props.definition.children[paginationContainer.currentPageIndex].children as FormElementDef<any>[]} parentPath={props.parentPath}/>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t\t\t<nav aria-label=\"Page navigation\">\r\n\t\t\t\t\t\t\t\t<ul className=\"pagination mb-0\">\r\n\t\t\t\t\t\t\t\t\t{!paginationContainer.currentIsFirst && <li className=\"page-item\">\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"page-link\" onClick={paginationContainer.previousClicked}>Previous</button>\r\n\t\t\t\t\t\t\t\t\t</li>}\r\n\t\t\t\t\t\t\t\t\t{!paginationContainer.currentIsLast && <li className={classNames('page-item', {disabled: paginationContainer.disableNext})}>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"page-link\" onClick={paginationContainer.nextClicked} disabled={paginationContainer.disableNext}>Next</button>\r\n\t\t\t\t\t\t\t\t\t</li>}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{paginationContainer.currentIsLast && <div className=\"col\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary float-right\" onClick={paginationContainer.submitClicked}>Submit</button>\r\n\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>)\r\n}","import axios from 'axios'\nimport {useEffect, useState} from 'react'\nimport {FieldStateContainer} from '../state/FieldStateContainer'\nimport {ReferenceDataContainer} from '../state/ReferenceDataContainer'\nimport {useContainer} from '../state/useContainer'\nimport {ValuesContainer} from '../state/ValuesContainer'\n\ninterface SuggestAttributes {\n\toptions?: any[]\n\treferenceDataOptions?: string\n\tmultiple?: boolean\n\tlabelKey?: string\n\tvalueKey?: string\n\thttp?: { url?: string }\n}\n\nexport function useSuggestion(path: string, attributes: SuggestAttributes) {\n\tconst referenceDataContainer = useContainer(ReferenceDataContainer)\n\tconst valuesContainer = useContainer(ValuesContainer)\n\tconst fieldStateContainer = useContainer(FieldStateContainer)\n\tconst [suggestions, setSuggestions] = useState<any[]>([])\n\tconst [httpSuggestions, setHttpSuggestions] = useState<any[]>([])\n\tconst [inlineSuggestions, setInlineSuggestions] = useState<any[]>([])\n\tconst [inputValue, setInputValue] = useState<string>(fieldStateContainer.get(path).selectedLabel || '')\n\tconst [showSuggestions, setShowSuggestions] = useState(false)\n\n\tuseEffect(() => {\n\t\tsetSuggestions(inlineSuggestions.concat(httpSuggestions))\n\t}, [inlineSuggestions, httpSuggestions])\n\n\tconst inputChanged = (newInputValue: string) => {\n\t\tsetInputValue(newInputValue)\n\t\tsetInlineSuggestions([])\n\t\tsetHttpSuggestions([])\n\t\tsetSuggestions([])\n\t\tconst lowerInputValue = newInputValue.trim().toLowerCase()\n\t\tconst fieldState = fieldStateContainer.get(path)\n\t\tconst lowerSelectedLabel = fieldState.selectedLabel && fieldState.selectedLabel.toLowerCase()\n\t\tif (lowerInputValue !== lowerSelectedLabel && lowerInputValue.length > 0) {\n\n\t\t\tconst referenceDataOptions = (attributes.referenceDataOptions && referenceDataContainer.referenceData[attributes.referenceDataOptions]) || []\n\t\t\tconst inlineOptions = attributes.options!.concat(referenceDataOptions)\n\n\t\t\tconst matchingInlineOptions = inlineOptions.filter(option => {\n\t\t\t\treturn JSON.stringify(option).toLowerCase().includes(lowerInputValue)\n\t\t\t})\n\n\t\t\tsetInlineSuggestions(matchingInlineOptions)\n\n\t\t\tif (attributes.http && attributes.http.url) {\n\t\t\t\taxios.get<any[]>(attributes.http.url + newInputValue)\n\t\t\t\t\t.then(function (response) {\n\t\t\t\t\t\tsetHttpSuggestions(response.data)\n\t\t\t\t\t})\n\t\t\t}\n\n\t\t\tsetShowSuggestions(true)\n\t\t}\n\t}\n\n\tconst clear = () => {\n\t\tsetShowSuggestions(false)\n\t}\n\n\tconst selectOption = (option: any) => {\n\t\tif (typeof option === 'string') {\n\n\t\t\tvaluesContainer.setValue(path, option)\n\t\t\tfieldStateContainer.selectedLabel(path, option)\n\t\t\tsetInputValue(option)\n\n\t\t} else if (typeof option === 'object') {\n\n\t\t\tif (attributes.valueKey) {\n\t\t\t\tvaluesContainer.setValue(path, option[attributes.valueKey])\n\t\t\t}\n\t\t\tfieldStateContainer.selectedLabel(path, option[attributes.labelKey || 'label'])\n\t\t\tsetInputValue(option[attributes.labelKey || 'label'])\n\n\t\t}\n\t\tsetShowSuggestions(false)\n\t}\n\n\treturn {inputValue, inputChanged, suggestions, showSuggestions, clear, selectOption}\n}","import {times} from 'lodash-es'\nimport React from 'react'\nimport {Description} from '../../display/Description'\nimport {useContainer} from '../../state/useContainer'\nimport {ValuesContainer} from '../../state/ValuesContainer'\nimport {ordinal} from '../../util'\nimport {ChildFormElements} from '../ChildFormElements'\nimport {FormElementProps} from '../FormElementProps'\n\n\nexport interface IterationAttributes {\n\tlabel: string\n\titemLabel: string\n\tdescription: string\n}\n\nexport const List = (props: FormElementProps<IterationAttributes>) => {\n\tconst formValuesContainer = useContainer(ValuesContainer)\n\treturn (\n\t\t<div className=\"form-group\">\n\t\t\t<span className=\"h4 align-middle mr-2\">{props.definition.attributes.label}</span>\n\t\t\t{props.definition.attributes.description && <Description path={props.path} text={props.definition.attributes.description}/>}\n\t\t\t{times(formValuesContainer.getCollectionSize(props.path), (index: number) =>\n\t\t\t\t<div className={'card border-bottom mb-3' + (index === 0 ? ' mt-2' : '')} key={props.path + '_COLLECTION_' + index}>\n\t\t\t\t\t<h5 className=\"card-header\">{ordinal(index + 1)} {props.definition.attributes.itemLabel}\n\t\t\t\t\t\t<button className=\"close text-dark\" onClick={() => formValuesContainer.deleteFromCollection(props.path, index)}>\n\t\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</h5>\n\t\t\t\t\t<div className=\"card-body pb-0\">\n\t\t\t\t\t\t{props.definition.children && <ChildFormElements childFormElements={props.definition.children} parentPath={props.path + '[' + index + ']'}/>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<button className=\"btn btn-primary d-inline\" onClick={() => formValuesContainer.addToCollection(props.path)}>Add</button>\n\t\t</div>)\n}\n","import React from 'react'\r\nimport {FormElementDef} from '../FormDef'\r\nimport {ShowIfContainer} from '../state/ShowIfContainer'\r\nimport {useContainer} from '../state/useContainer'\r\nimport {createPath} from '../util'\r\nimport {lookupElement} from './formElementTypes'\r\n\r\ninterface ChildFormElementsProps {\r\n\tchildFormElements: FormElementDef<any>[]\r\n\tparentPath: string\r\n}\r\n\r\nexport const ChildFormElements = (props: ChildFormElementsProps) => {\r\n\tconst showIfContainer = useContainer(ShowIfContainer)\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{props.childFormElements.map((elementDef, index) => {\r\n\t\t\t\tconst path = createPath(props.parentPath, elementDef.fieldId)\r\n\t\t\t\tif (!showIfContainer.shouldShow(path, elementDef)) {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t\tconst Child: any = lookupElement(elementDef.type)\r\n\t\t\t\treturn React.createElement(Child, {\r\n\t\t\t\t\tdefinition: elementDef,\r\n\t\t\t\t\tparentPath: props.parentPath,\r\n\t\t\t\t\tpath: path,\r\n\t\t\t\t\tkey: props.parentPath + '_' + index\r\n\t\t\t\t})\r\n\t\t\t})}\r\n\t\t</div>)\r\n}","import React from 'react'\r\nimport FormDef from './FormDef'\r\nimport {ChildFormElements} from './formElements/ChildFormElements'\r\nimport {ConfigContainer} from './state/ConfigContainer'\r\nimport {ExpressionContainer} from './state/ExpressionContainer'\r\nimport {FieldStateContainer} from './state/FieldStateContainer'\r\nimport {FormStateContainer} from './state/FormStateContainer'\r\nimport {PaginationContainer} from './state/PaginationContainer'\r\nimport {ReferenceDataContainer} from './state/ReferenceDataContainer'\r\nimport {ShowIfContainer} from './state/ShowIfContainer'\r\nimport {ValidationContainer} from './state/ValidationContainer'\r\nimport {ValuesContainer} from './state/ValuesContainer'\r\n\r\nexport interface FormProps {\r\n\tformDef: FormDef\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = (props) => (<div className=\"\">\r\n\t<ConfigContainer.Provider initialState={props.formDef.config}>\r\n\t\t<ReferenceDataContainer.Provider initialState={props.formDef.referenceData}>\r\n\t\t\t<FormStateContainer.Provider>\r\n\t\t\t\t<FieldStateContainer.Provider>\r\n\t\t\t\t\t<ValuesContainer.Provider>\r\n\t\t\t\t\t\t<ExpressionContainer.Provider>\r\n\t\t\t\t\t\t\t<ShowIfContainer.Provider>\r\n\t\t\t\t\t\t\t\t<ValidationContainer.Provider>\r\n\t\t\t\t\t\t\t\t\t<PaginationContainer.Provider>\r\n\t\t\t\t\t\t\t\t\t\t<ChildFormElements childFormElements={props.formDef.elements} parentPath=\"\"/>\r\n\t\t\t\t\t\t\t\t\t</PaginationContainer.Provider>\r\n\t\t\t\t\t\t\t\t</ValidationContainer.Provider>\r\n\t\t\t\t\t\t\t</ShowIfContainer.Provider>\r\n\t\t\t\t\t\t</ExpressionContainer.Provider>\r\n\t\t\t\t\t</ValuesContainer.Provider>\r\n\t\t\t\t</FieldStateContainer.Provider>\r\n\t\t\t</FormStateContainer.Provider>\r\n\t\t</ReferenceDataContainer.Provider>\r\n\t</ConfigContainer.Provider>\r\n</div>)","//import 'react-app-polyfill/ie11'\r\nimport axios from 'axios'\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {Form} from './Form'\r\nimport FormDef from './FormDef'\r\nimport './index.css'\r\n\r\naxios.get<FormDef>('api/formDefinition/exampleFormDefinition.json')\r\n\t.then(function (response) {\r\n\t\tReactDOM.render(\r\n\t\t\t<Form formDef={response.data}/>,\r\n\t\t\tdocument.getElementById('form')\r\n\t\t)\r\n\t})\r\n\t.catch(function (error) {\r\n\t\tconsole.error(error)\r\n\t\tthrow new Error(error)\r\n\t})"],"sourceRoot":""}