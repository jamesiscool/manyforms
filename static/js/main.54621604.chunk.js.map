{"version":3,"sources":["hooks/useStore.tsx","hooks/useConfig.ts","hooks/useFormDef.ts","hooks/useEvent.ts","hooks/useFieldState.ts","hooks/useValues.ts","hooks/useExpression.ts","hooks/useShowIf.ts","util.ts","display/Description.tsx","validation/ValidationRules.ts","hooks/useFormState.ts","hooks/useValidation.ts","hooks/useUpdate.ts","validation/ValidationExpressions.ts","FormDef.ts","formElements/formElementTypes.tsx","display/Label.tsx","display/FieldChrome.tsx","hooks/useReferenceData.ts","svg/octicons/search.svg","formElements/input/Autocomplete.tsx","hooks/usePagination.ts","hooks/useSubmit.ts","formElements/pagination/Accordion.tsx","formElements/input/Dropdown.tsx","formElements/input/TextInput.tsx","formElements/output/Heading.tsx","formElements/output/Paragraph.tsx","formElements/input/ButtonGroup.tsx","formElements/pagination/Tabs.tsx","hooks/useSuggestion.ts","formElements/output/TextOutput.tsx","formElements/collection/List.tsx","formElements/ChildFormElements.tsx","Form.tsx","index.tsx"],"names":["StoreContext","createContext","StoreProvider","props","store","useCreateStore","initialState","react_default","a","createElement","Provider","value","children","_useReducer","useReducer","storeState","action","nextStoreState","produce","draftStoreState","actionType","set","path","array","get","splice","index","unset","Error","console","log","_useReducer2","Object","slicedToArray","dispatch","defaultValue","getArrayLength","length","deleteFromCollection","useStore","React","useContext","defaultConfig","showErrors","showErrorsDelay","disableNextWhenErrors","useConfig","arguments","undefined","_useStore","config","setupConfig","formDefinitionConfig","objectSpread","useFormDef","formDef","setupFormDef","useEvent","evaluate","useExpression","actions","setFieldValue","_ref","fieldDef","expressionExtraContex","expression","data","VALUES_STORE_KEY","setStoreValue","_ref2","handleEvent","eventType","events","filter","eventDef","triggers","some","trigger","triggerEventMatches","includes","triggerPathMatches","pathExpression","forEach","actionDef","useFieldState","eventHappened","event","concat","getFieldState","Date","now","setSelectedSuggestionLabel","label","FIELD_STATE_STORE_KEY","setShowManualEntryForSuggestion","showen","focus","valueChanged","blur","useValues","setValue","values","getValue","addToCollection","element","getCollectionSize","setValueExpression","def","expresion","extraContext","setUp","initialValues","jexl","addTransform","toUpperCase","toLowerCase","isAlpha","isAlphanumeric","isCurrency","isEmail","isNumeric","addBinaryOp","left","right","urlSearchParams","fromPairs","Array","from","URLSearchParams","window","location","search","slice","entries","extraContex","includeFieldValue","context","fieldValue","evalSync","useShowIf","shouldShow","showIf","createPath","parentPath","fieldId","Description","id","className","text","validationRules","required","validate","defaultMessage","email","isEmpty","alpha","numeric","alphanumeric","currency","useFormState","setFormState","formState","nextClicked","FORM_STATE_STORE_KEY","clearNextClicked","submitClicked","nextOrSubmit","useValidation","_useValues","updateAt","_useState","useState","setCount","update","count","updateIn","ms","setTimeout","when","useUpdate","validationExpressions","validIf","invalidIf","requiredIf","useValidationExpressions","validation","reduce","message","constraint","validationRule","isValidationExpresionDef","validationExpression","name","validateConstraint","shouldShowErrors","fieldState","timePlusDelayHasPassed","time","validateAndShouldShow","hasErrorsRecursively","childFieldDef","type","childPath","formElementCollectionTypes","hasOwnProperty","size","Label","htmlFor","error","FieldChrome","Label_Label","description","Description_Description","useReferenceData","referenceData","setReferenceData","setupReferenceData","http","httpReferenceDataDef","axios","then","response","_extends","assign","target","i","source","key","prototype","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","search_ref2","fillRule","d","search_SvgSearch","svgRef","width","height","viewBox","ref","ForwardRef","forwardRef","defDefaults","__webpack_require__","p","options","multiple","labelKey","valueKey","postfixSearchIcon","usePagination","_useFormState","_useSubmit","submitting","submit","post","url","outcomeIndex","outcomes","findIndex","outcome","statusCodes","status","catch","useSubmit","_useState2","setPath","_useState3","_useState4","pages","setPages","_useState5","_useState6","currentPageIndex","setCurrentPageIndex","firstShownPage","page","lastShownPage","findLastIndex","currentIsFirst","currentIsLast","currentPageHasErrors","disableNext","setupPages","pageDef","previousClicked","formElementNonCollectionTypes","accordion","pagination","currentPageRef","useRef","useEffect","scrollCurrentPageIntoView","current","scroll","top","getBoundingClientRect","goToPage","previous","next","role","aria-multiselectable","map","onClick","ChildFormElements_ChildFormElements","childFormElements","aria-label","classNames","disabled","dropdown","_useFieldState","referenceDataOptions","FieldChrome_FieldChrome","onChange","currentTarget","aria-describedby","onFocus","onBlur","option","Math","random","toString","substring","textInput","heading","level","paragraph","buttonGroup","buttonFocus","setButtonFocus","checked","tabs","tabsRef","scrollIntoView","pill","href","tabIndex","aria-disabled","autocomplete","_useSuggestion","suggestions","setSuggestions","httpSuggestions","setHttpSuggestions","inlineSuggestions","setInlineSuggestions","_useState7","selectedSuggestionLabel","_useState8","inputValue","setInputValue","_useState9","_useState10","showSuggestions","setShowSuggestions","inputChanged","newInputValue","lowerInputValue","trim","lowerSelectedLabel","fieldDefOption","matchingInlineOptions","JSON","stringify","clear","selectOption","valueIsWholeOption","valueExpression","useSuggestion","cursor","setCursor","inputContainerRef","suggestionsContainerRef","showManualEntryForSuggestion","document","body","addEventListener","handlePotentialOutsideClick","removeEventListener","contains","handleInputChange","changedValue","handleBlur","newTarget","activeElement","handleFocus","handleInputKeyDown","keyCode","switchToSuggestLinkLabel","manualDescription","Fragment","esm","onKeyDown","placement","style","data-placement","suggestion","showSwitchToManualEntryLink","switchToManualEntryLinkLabel","textOutput","list","times","n","s","v","ordinal","itemLabel","aria-hidden","formElementTypes","ChildFormElements","elementDef","ChildFormElements_ChildFormElement","ChildFormElement","Child","foundType","warn","lookupElement","childProps","Form","elements","ReactDOM","render","useStore_StoreProvider","Form_Form","getElementById"],"mappings":"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","file":"static/js/main.54621604.chunk.js","sourcesContent":["import produce from 'immer'\r\nimport {get, set, unset} from 'lodash-es'\r\nimport React, {createContext, useReducer} from 'react'\r\n\r\ninterface StoreState {\r\n\t[key: string]: any\r\n}\r\n\r\ninterface Store {\r\n\tstore: StoreState,\r\n\tset: (path: string, value: any) => void\r\n\tget: <T extends any>(path: string, defaultValue?: T) => T\r\n\tgetArrayLength: (path: string) => number\r\n\tdeleteFromCollection: (path: string, index: number) => void\r\n}\r\n\r\nexport const StoreContext = createContext<Store | null>(null)\r\n\r\nexport const StoreProvider: React.FC<{ initialState?: StoreState }> = (props) => {\r\n\tconst store = useCreateStore(props.initialState)\r\n\treturn <StoreContext.Provider value={store}>\r\n\t\t{props.children}\r\n\t</StoreContext.Provider>\r\n}\r\n\r\n\r\nconst useCreateStore = (initialState?: StoreState) => {\r\n\tconst [store, dispatch] = useReducer((storeState: StoreState, action: { actionType: 'set' | 'deleteFromCollection' | 'unset', path: string, value?: any, index?: number }) => {\r\n\t\tconst nextStoreState = produce(storeState, draftStoreState => {\r\n\t\t\tswitch (action.actionType) {\r\n\t\t\t\tcase 'set':\r\n\t\t\t\t\tset(draftStoreState, action.path, action.value)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'deleteFromCollection':\r\n\t\t\t\t\tconst array = get(draftStoreState, action.path) as any[]\r\n\t\t\t\t\tarray.splice(action.index!, 1)\r\n\t\t\t\t\tset(draftStoreState, action.path, array)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'unset':\r\n\t\t\t\t\tunset(draftStoreState, action.path)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error()\r\n\t\t\t}\r\n\t\t})\r\n\t\tconsole.log('store:', nextStoreState)\r\n\t\treturn nextStoreState\r\n\t}, initialState || {})\r\n\r\n\treturn {\r\n\t\tstore,\r\n\t\tset: (path: string, value: any) => {\r\n\t\t\tconsole.log('set:', path, value)\r\n\t\t\tdispatch({actionType: 'set', path, value})\r\n\r\n\t\t},\r\n\t\tget: <T extends any>(path: string, defaultValue?: T): T => {\r\n\t\t\treturn get(store, path, defaultValue)\r\n\t\t},\r\n\t\tgetArrayLength: (path: string): number => {\r\n\t\t\treturn get(store, path, []).length\r\n\t\t},\r\n\t\tdeleteFromCollection: (path: string, index: number) => {\r\n\t\t\tdispatch({actionType: 'deleteFromCollection', path, index})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const useStore = (): Store => {\r\n\tconst store = React.useContext(StoreContext)\r\n\tif (store === null) {\r\n\t\tthrow new Error('Component must be wrapped with <StoreProvider>')\r\n\t}\r\n\treturn store\r\n}\r\n\r\n","import {useStore} from './useStore'\r\n\r\ntype showErrors = 'immediately' | 'onFocus' | 'onValueChanged' | 'onBlur' | 'nextOrSummit'\r\n\r\nexport interface Config {\r\n\tshowErrors: showErrors\r\n\tshowErrorsDelay: number //milliseconds\r\n\tdisableNextWhenErrors: boolean\r\n}\r\n\r\nconst defaultConfig: Config = {\r\n\tshowErrors: 'onFocus',\r\n\tshowErrorsDelay: 500,\r\n\tdisableNextWhenErrors: false\r\n}\r\n\r\nconst CONFIG_STORE_KEY = 'config'\r\n\r\nexport const useConfig = (formDefinitionConfig: Partial<Config> = {}) => {\r\n\tconst {set, get} = useStore()\r\n\treturn {\r\n\t\tconfig: get(CONFIG_STORE_KEY) || {},\r\n\t\tsetupConfig: (formDefinitionConfig = {}) => {\r\n\t\t\tset(CONFIG_STORE_KEY, {...defaultConfig, ...formDefinitionConfig})\r\n\t\t}\r\n\t}\r\n}","import FormDef from '../FormDef'\r\nimport {useStore} from './useStore'\r\n\r\nconst FORM_DEF_STORE_KEY = 'formDef'\r\n\r\nexport const useFormDef = () => {\r\n\tconst {set, get} = useStore()\r\n\treturn {\r\n\t\tformDef: get(FORM_DEF_STORE_KEY) as FormDef,\r\n\t\tsetupFormDef: (formDef: FormDef) => {\r\n\t\t\tset(FORM_DEF_STORE_KEY, formDef)\r\n\t\t}\r\n\t}\r\n}","import {FieldDef} from '../FormDef'\r\nimport {useExpression} from './useExpression'\r\nimport {FieldEvents} from './useFieldState'\r\nimport {useFormDef} from './useFormDef'\r\nimport {useStore} from './useStore'\r\nimport {VALUES_STORE_KEY} from './useValues'\r\n\r\nexport interface EventDef {\r\n\ttriggers: Trigger[]\r\n\tactions: ActionDef[]\r\n}\r\n\r\ntype EventType = 'formLoaded' | 'beforePageNext' | 'showManualEntryForSuggestion' | FieldEvents\r\n\r\ninterface Trigger {\r\n\teventType: EventType[]\r\n\tpath?: string\r\n\tpathExpression?: string\r\n}\r\n\r\ntype ActionType = 'setFieldValue' | 'setStoreValue'\r\n\r\ninterface ActionDef {\r\n\taction: ActionType,\r\n\tpath?: string\r\n\tdata?: any\r\n\texpression?: string\r\n}\r\n\r\nexport const useEvent = () => {\r\n\tconst {evaluate} = useExpression()\r\n\tconst {set} = useStore()\r\n\tconst {formDef} = useFormDef()\r\n\r\n\r\n\tconst actions: { [action: string]: (actionDef: ActionDef, fieldDef?: FieldDef, expressionExtraContex?: any) => void } = {\r\n\t\tsetFieldValue: ({path, expression, data}, fieldDef, expressionExtraContex) => {\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (data != null) {\r\n\t\t\t\tset(VALUES_STORE_KEY + '.' + path, data)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (expression) {\r\n\t\t\t\tset(VALUES_STORE_KEY + '.' + path, evaluate(expression, path, fieldDef, expressionExtraContex))\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetStoreValue: ({path, expression, data}, fieldDef, expressionExtraContex) => {\r\n\t\t\tif (path == null) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (data != null) {\r\n\t\t\t\tset(path, data)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (expression) {\r\n\t\t\t\tset(path, evaluate(expression, path, fieldDef, expressionExtraContex))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\thandleEvent: (eventType: EventType, path?: string, fieldDef?: FieldDef, expressionExtraContex?: any) => {\r\n\t\t\tconst eventDefs = (formDef && formDef.events) || []\r\n\t\t\tconst eventsDefWithMatchingTriggers = eventDefs.filter(eventDef => eventDef.triggers.some(trigger => {\r\n\t\t\t\t\tconst triggerEventMatches = trigger.eventType.includes(eventType)\r\n\t\t\t\t\tconst triggerPathMatches = (trigger.path == null && trigger.pathExpression == null)\r\n\t\t\t\t\t\t|| trigger.path === path\r\n\t\t\t\t\t\t|| (trigger.pathExpression && evaluate(trigger.pathExpression, path, fieldDef, expressionExtraContex))\r\n\t\t\t\t\treturn triggerEventMatches && triggerPathMatches\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\teventsDefWithMatchingTriggers.forEach(eventDef => eventDef.actions.forEach(actionDef => {\r\n\t\t\t\tconst action = actions[actionDef.action]\r\n\t\t\t\tif (action) {\r\n\t\t\t\t\taction(actionDef, fieldDef, expressionExtraContex)\r\n\t\t\t\t}\r\n\t\t\t}))\r\n\r\n\t\t}\r\n\t}\r\n}","import {useEvent} from './useEvent'\r\nimport {useStore} from './useStore'\r\n\r\ninterface FieldStates {\r\n\t[path: string]: FieldState\r\n}\r\n\r\ninterface FieldState extends EventTimes {\r\n\tselectedSuggestionLabel?: string\r\n\tshowManualEntryForSuggestion?: boolean\r\n}\r\n\r\ntype EventTimes = {\r\n\t[Event in FieldEvents]?: number; //Date.now() when event first happened on the field\r\n}\r\n\r\nexport type FieldEvents = 'focus' | 'valueChanged' | 'blur'\r\n\r\nconst FIELD_STATE_STORE_KEY = 'fieldStates'\r\n\r\nexport const useFieldState = () => {\r\n\tconst {set, get} = useStore()\r\n\tconst {handleEvent} = useEvent()\r\n\r\n\tconst getFieldState = (path: string): FieldState => get(`${FIELD_STATE_STORE_KEY}.${path}`, {})\r\n\r\n\tconst eventHappened = (path: string, event: FieldEvents) => {\r\n\t\thandleEvent(event,path)\r\n\t\tif (!getFieldState(path)[event]) {\r\n\t\t\tset(`${FIELD_STATE_STORE_KEY}.${path}.${event}`, Date.now())\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetFieldState: (path: string): FieldState => get(`${FIELD_STATE_STORE_KEY}.${path}`, {}),\r\n\r\n\t\tsetSelectedSuggestionLabel: (path: string, label: string) => {\r\n\t\t\tset(FIELD_STATE_STORE_KEY + '.' + path + '.selectedSuggestionLabel', label)\r\n\t\t},\r\n\r\n\t\tsetShowManualEntryForSuggestion: (path: string, showen: boolean) => {\r\n\t\t\tset(FIELD_STATE_STORE_KEY + '.' + path + '.showManualEntryForSuggestion', showen)\r\n\t\t},\r\n\r\n\t\tfocus: (path: string) => eventHappened(path, 'focus'),\r\n\t\tvalueChanged: (path: string) => eventHappened(path, 'valueChanged'),\r\n\t\tblur: (path: string) => eventHappened(path, 'blur'),\r\n\t}\r\n}","import {ElementDef} from '../FormDef'\r\nimport {useExpression} from './useExpression'\r\nimport {useFieldState} from './useFieldState'\r\nimport {useStore} from './useStore'\r\n\r\nexport const VALUES_STORE_KEY = 'values'\r\n\r\nexport const useValues = () => {\r\n\tconst store = useStore()\r\n\tconst {valueChanged} = useFieldState()\r\n\tconst {evaluate} = useExpression()\r\n\r\n\tconst setValue = (path: string, value: any) => {\r\n\t\tstore.set(`${VALUES_STORE_KEY}.${path}`, value)\r\n\t\tvalueChanged(path)\r\n\t}\r\n\r\n\r\n\treturn {\r\n\t\tvalues: store.get(VALUES_STORE_KEY),\r\n\t\tsetValue,\r\n\t\tgetValue: (path: string): string => {\r\n\t\t\treturn store.get(`${VALUES_STORE_KEY}.${path}`)\r\n\t\t},\r\n\t\taddToCollection: (path: string, element: any = {}) => {\r\n\t\t\tsetValue(`${path}[${store.getArrayLength(`${VALUES_STORE_KEY}.${path}`)}]`, element)\r\n\t\t},\r\n\t\tdeleteFromCollection: (path: string, index: number) => {\r\n\t\t\tstore.deleteFromCollection(`${VALUES_STORE_KEY}.${path}`, index)\r\n\t\t},\r\n\t\tgetCollectionSize: (path: string) => {\r\n\t\t\treturn store.getArrayLength(`${VALUES_STORE_KEY}.${path}`)\r\n\t\t},\r\n\t\tsetValueExpression: (path: string, def: ElementDef, expresion: string, extraContext?: any) => {\r\n\t\t\tsetValue(path, evaluate(expresion, path, def, extraContext, false))\r\n\t\t},\r\n\t\tsetUp: (initialValues = {}) => {\r\n\t\t\tstore.set(VALUES_STORE_KEY, initialValues)\r\n\t\t}\r\n\t}\r\n}","import jexl from 'jexl'\r\nimport {fromPairs} from 'lodash-es'\r\nimport {useCallback} from 'react'\r\nimport isAlpha from 'validator/lib/isAlpha'\r\nimport isAlphanumeric from 'validator/lib/isAlphanumeric'\r\nimport isCurrency from 'validator/lib/isCurrency'\r\nimport isEmail from 'validator/lib/isEmail'\r\nimport isNumeric from 'validator/lib/isNumeric'\r\nimport {ElementDef} from '../FormDef'\r\nimport {useConfig} from './useConfig'\r\nimport {useStore} from './useStore'\r\nimport {VALUES_STORE_KEY} from './useValues'\r\nimport {parse} from 'query-string'\r\n\r\n//Transforms\r\njexl.addTransform('toUpperCase', (value) => value.toUpperCase())\r\njexl.addTransform('toLowerCase', (value) => value.toLowerCase())\r\n\r\n//'Is' validation\r\njexl.addTransform('isAlpha', (value) => value && isAlpha(value))\r\njexl.addTransform('isAlphanumeric', (value) => value && isAlphanumeric(value))\r\njexl.addTransform('isCurrency', (value) => value && isCurrency(value))\r\njexl.addTransform('isEmail', (value) => value && isEmail(value))\r\njexl.addTransform('isNumeric', (value) => value && isNumeric(value))\r\n\r\n//case-insensitive string equality\r\njexl.addBinaryOp('_=', 20, (left, right) => left.toLowerCase() === right.toLowerCase())\r\n\r\nexport const useExpression = () => {\r\n\tconst {config} = useConfig()\r\n\tconst {store, get} = useStore()\r\n\r\n\t//const urlSearchParams = parse(window.location.search)\r\n\r\n\tconst urlSearchParams = fromPairs(Array.from(new URLSearchParams(window.location.search.slice(1)).entries()))\r\n\r\n\treturn {\r\n\t\tevaluate: <T>(expression: string, path?: string, def?: ElementDef, extraContex?: any, includeFieldValue = true): T => {\r\n\t\t\tconst context = {\r\n\t\t\t\t...store,\r\n\t\t\t\tdef,\r\n\t\t\t\tpath,\r\n\t\t\t\tconfig,\r\n\t\t\t\turlSearchParams,\r\n\t\t\t\t...extraContex\r\n\t\t\t}\r\n\t\t\tif (includeFieldValue) {\r\n\t\t\t\tconst fieldValue = get(`${VALUES_STORE_KEY}.${path}`)\r\n\t\t\t\tcontext.fieldValue = fieldValue\r\n\t\t\t\tcontext.value = fieldValue\r\n\t\t\t}\r\n\t\t\treturn jexl.evalSync(expression, context)\r\n\t\t}\r\n\t}\r\n}","import {ElementDef} from '../FormDef'\r\nimport {useExpression} from './useExpression'\r\n\r\nexport const useShowIf = () => {\r\n\tconst {evaluate} = useExpression()\r\n\treturn {\r\n\t\tshouldShow: (path: string, def: ElementDef): boolean => {\r\n\t\t\tif (!def.showIf) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\treturn def.showIf.some(expression => evaluate(expression, path, def))\r\n\t\t}\r\n\t}\r\n}","export const createKey = () => (Math.random() + 1).toString(36).substring(2)\r\n\r\nexport const ordinal = (n: number): string => {\r\n\tconst s = ['th', 'st', 'nd', 'rd'],\r\n\t\tv = n % 100\r\n\treturn n + (s[(v - 20) % 10] || s[v] || s[0])\r\n}\r\n\r\nexport const createPath = (parentPath: string, fieldId?: string): string => {\r\n\tif (!fieldId) {\r\n\t\treturn parentPath\r\n\t}\r\n\tif (parentPath !== '') {\r\n\t\treturn parentPath + '.' + fieldId\r\n\t}\r\n\treturn fieldId\r\n\r\n}","import React from 'react'\r\n\r\ninterface DescriptionProps {\r\n\tpath: string,\r\n\ttext: string\r\n}\r\n\r\nexport const Description = (props: DescriptionProps) => (\r\n\t<div id={props.path + '_description'} className=\"pt-2 text-muted description\">{props.text}</div>\r\n)","import isAlpha from 'validator/lib/isAlpha'\r\nimport isAlphanumeric from 'validator/lib/isAlphanumeric'\r\nimport isCurrency from 'validator/lib/isCurrency'\r\nimport isEmail from 'validator/lib/isEmail'\r\nimport isEmpty from 'validator/lib/isEmpty'\r\nimport isNumeric from 'validator/lib/isNumeric'\r\n\r\ninterface ValidationRule {\r\n\tvalidate: (value: string, args?: string | string[]) => boolean,\r\n\tdefaultMessage: string\r\n}\r\n\r\nexport const validationRules: { [name: string]: ValidationRule } = {\r\n\trequired: {\r\n\t\tvalidate: (value: string) => !(value == null || value.length <= 0 || value === ''),\r\n\t\tdefaultMessage: 'This field is required'\r\n\t},\r\n\temail: {\r\n\t\tvalidate: (value: string) => isEmpty(value) || isEmail(value),\r\n\t\tdefaultMessage: 'This field must be an email address'\r\n\t},\r\n\talpha: {\r\n\t\tvalidate: (value: string) => isEmpty(value) || isAlpha(value),\r\n\t\tdefaultMessage: 'This field must be only letters'\r\n\t},\r\n\tnumeric: {\r\n\t\tvalidate: (value: string) => isEmpty(value) || isNumeric(value),\r\n\t\tdefaultMessage: 'This field must be only numbers'\r\n\t},\r\n\talphanumeric: {\r\n\t\tvalidate: (value: string) => isEmpty(value) || isAlphanumeric(value),\r\n\t\tdefaultMessage: 'This field must be only letters and numbers'\r\n\t},\r\n\tcurrency: {\r\n\t\tvalidate: (value: string) => isEmpty(value) || isCurrency(value),\r\n\t\tdefaultMessage: 'This field must be a currency amount'\r\n\t}\r\n}","import {useStore} from './useStore'\r\n\r\ntype FormState = {\r\n\tnextClicked?: number //Date.now()\r\n\tsubmitClicked?: number\r\n\tsubmitting?: boolean\r\n\toutcomeIndex?: number\r\n\tsubmitResponse?:any\r\n\tsubmitError?:any\r\n}\r\n\r\nconst FORM_STATE_STORE_KEY = 'formState'\r\n\r\nexport const useFormState = () => {\r\n\tconst {set, get} = useStore()\r\n\tconst setFormState = (path: keyof FormState, value: any) => {\r\n\t\tset(`${FORM_STATE_STORE_KEY}.${path}`, value)\r\n\t}\r\n\r\n\treturn {\r\n\t\tformState: get<FormState>(FORM_STATE_STORE_KEY, {}),\r\n\t\tsetFormState,\r\n\t\tnextClicked: () => {\r\n\t\t\tif (!get(FORM_STATE_STORE_KEY + '.nextClicked')) {\r\n\t\t\t\tsetFormState('nextClicked', Date.now())\r\n\t\t\t}\r\n\t\t},\r\n\t\tclearNextClicked: () => {\r\n\t\t\tsetFormState('nextClicked', undefined)\r\n\t\t},\r\n\t\tsubmitClicked: () => {\r\n\t\t\tif (!get(FORM_STATE_STORE_KEY + '.submitClicked')) {\r\n\t\t\t\tsetFormState('submitClicked', Date.now())\r\n\t\t\t}\r\n\t\t},\r\n\t\tnextOrSubmit: (): boolean => {\r\n\t\t\treturn (get(FORM_STATE_STORE_KEY + '.nextClicked') || get(FORM_STATE_STORE_KEY + '.submitClicked'))\r\n\t\t}\r\n\t}\r\n}","import {ElementDef, FieldDef, isValidationExpresionDef, ValidationConstraintDef} from '../FormDef'\r\nimport {isTypeACollection} from '../formElements/formElementTypes'\r\nimport {createPath} from '../util'\r\nimport {useValidationExpressions} from '../validation/ValidationExpressions'\r\nimport {validationRules} from '../validation/ValidationRules'\r\nimport {useConfig} from './useConfig'\r\nimport {useFieldState} from './useFieldState'\r\nimport {useFormState} from './useFormState'\r\nimport {useShowIf} from './useShowIf'\r\nimport {useUpdate} from './useUpdate'\r\nimport {useValues} from './useValues'\r\n\r\nexport const useValidation = () => {\r\n\tconst config = useConfig().config\r\n\tconst {getValue, getCollectionSize} = useValues()\r\n\tconst {getFieldState} = useFieldState()\r\n\tconst {nextOrSubmit} = useFormState()\r\n\tconst {shouldShow} = useShowIf()\r\n\tconst {updateAt} = useUpdate()\r\n\tconst validationExpressions = useValidationExpressions()\r\n\r\n\tconst validate = (path: string, def: FieldDef): string | null => {\r\n\t\tif (!def.validation || def.validation.length <= 0) {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\treturn def.validation.reduce<string | null>((message, constraint): string | null => {\r\n\t\t\tif (message != null) {\r\n\t\t\t\treturn message\r\n\t\t\t}\r\n\t\t\treturn validateConstraint(constraint, path, def)\r\n\t\t}, null)\r\n\t}\r\n\r\n\tfunction validateConstraint(constraint: ValidationConstraintDef | string, path: string, def: ElementDef): string | null {\r\n\t\tif (typeof constraint === 'string') {\r\n\t\t\tconst fieldValue = getValue(path) || ''\r\n\t\t\tconst validationRule = validationRules[constraint]\r\n\t\t\tif (!validationRule.validate(fieldValue)) {\r\n\t\t\t\treturn validationRule.defaultMessage\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t} else if (!isValidationExpresionDef(constraint)) {\r\n\t\t\tconst fieldValue = getValue(path) || ''\r\n\t\t\tconst validationRule = validationRules[constraint.name]\r\n\t\t\tif (!validationRule.validate(fieldValue)) {\r\n\t\t\t\treturn constraint.message || validationRule.defaultMessage\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t} else {\r\n\t\t\tconst validationExpression = validationExpressions[constraint.name]\r\n\t\t\tif (!validationExpression.validate(path, def, constraint.expression)) {\r\n\t\t\t\treturn constraint.message || validationExpression.defaultMessage\r\n\t\t\t}\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n\tconst validateAndShouldShow = (path: string, def: ElementDef): string | null => {\r\n\t\treturn shouldShowErrors(path, def) ? validate(path, def) : null\r\n\t}\r\n\r\n\tconst shouldShowErrors = (path: string, def: ElementDef): boolean => {\r\n\t\tif (nextOrSubmit() || config.showErrors === 'immediately') {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tconst fieldState = getFieldState(path) || {}\r\n\t\tif (config.showErrors === 'onFocus' && fieldState.focus) {\r\n\t\t\treturn timePlusDelayHasPassed(fieldState.focus)\r\n\t\t}\r\n\t\tif (config.showErrors === 'onValueChanged' && fieldState.valueChanged) {\r\n\t\t\treturn timePlusDelayHasPassed(fieldState.valueChanged)\r\n\t\t}\r\n\t\tif (config.showErrors === 'onBlur' && fieldState.blur) {\r\n\t\t\treturn timePlusDelayHasPassed(fieldState.blur)\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst timePlusDelayHasPassed = (time: number) => {\r\n\t\tif (!config.showErrorsDelay || config.showErrorsDelay === 0) {\r\n\t\t\treturn true\r\n\t\t} else if ((time + config.showErrorsDelay) < Date.now()) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\tupdateAt(time + config.showErrorsDelay)\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tconst hasErrorsRecursively = (path: string, def?: ElementDef): boolean => {\r\n\t\tif (!def || !shouldShow(path, def)) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tif (validate(path, def) != null) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tif (def.children) {\r\n\t\t\treturn def.children.some((childFieldDef) => {\r\n\t\t\t\tconst childPath = createPath(path, childFieldDef.fieldId)\r\n\t\t\t\tif (!shouldShow(childPath, childFieldDef)) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tif (isTypeACollection(childFieldDef.type)) {\r\n\t\t\t\t\tconst size = getCollectionSize(childPath)\r\n\t\t\t\t\tfor (let index = 0; index < size; index++) {\r\n\t\t\t\t\t\tif (hasErrorsRecursively(childPath + '[' + index + ']', childFieldDef)) {\r\n\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn hasErrorsRecursively(childPath, childFieldDef)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\r\n\treturn {validate, shouldShowErrors, validateAndShouldShow, hasErrorsRecursively}\r\n}","import {useState} from 'react'\n\n// Based on useUpdate, useTimeout & useTimeoutFn from https://github.com/streamich/react-use\nexport const useUpdate = () => {\n\tconst [, setCount] = useState(0)\n\tconst update = () => setCount(count => count + 1)\n\n\tconst updateIn = (ms: number) => {\n\t\tsetTimeout(() => {\n\t\t\tupdate()\n\t\t}, ms)\n\t}\n\n\treturn {\n\t\tupdate,\n\t\tupdateIn,\n\t\tupdateAt: (when: number) => {\n\t\t\tupdateIn(when - Date.now())\n\t\t}\n\t}\n}","import {ElementDef} from '../FormDef'\r\nimport {useExpression} from '../hooks/useExpression'\r\nimport {useValues} from '../hooks/useValues'\r\nimport {validationRules} from './ValidationRules'\r\n\r\nexport const useValidationExpressions = () => {\r\n\tconst {evaluate} = useExpression()\r\n\tconst {getValue} = useValues()\r\n\r\n\tinterface ValidationExpression {\r\n\t\tvalidate: (path: string, def: ElementDef, expression: string) => boolean,\r\n\t\tdefaultMessage: string\r\n\t}\r\n\r\n\tconst validationsExpressions: { [name: string]: ValidationExpression } = {\r\n\t\tvalidIf: {\r\n\t\t\tvalidate: (path: string, def: ElementDef, expression: string) => evaluate(expression, path, def),\r\n\t\t\tdefaultMessage: 'This field is invalid' // The form editor should make the user enter message as this does not give the user any information about why the field is invalid\r\n\t\t},\r\n\t\tinvalidIf: {\r\n\t\t\tvalidate: (path: string, def: ElementDef, expression: string) => !evaluate(expression, path, def),\r\n\t\t\tdefaultMessage: 'This field is invalid' // As with validIf form editor should make the user enter message as this does not give the user any information about why the field is invalid\r\n\t\t},\r\n\t\trequiredIf: {\r\n\t\t\tvalidate: (path: string, def: ElementDef, expression: string) => {\r\n\t\t\t\tif (evaluate(expression, path, def)) {\r\n\t\t\t\t\treturn validationRules.required.validate(getValue(path))\r\n\t\t\t\t}\r\n\t\t\t\treturn true\r\n\t\t\t},\r\n\t\t\tdefaultMessage: validationRules.required.defaultMessage\r\n\t\t}\r\n\t}\r\n\r\n\treturn validationsExpressions\r\n}","import {Config} from './hooks/useConfig'\r\nimport {EventDef} from './hooks/useEvent'\r\n\r\nexport default interface FormDef {\r\n\telements: ElementDef[]\r\n\tconfig?: Config\r\n\treferenceData?: ReferenceDataDef\r\n\tsubmit: {\r\n\t\turl: string,\r\n\t\toutcomes: {\r\n\t\t\tstatusCodes: number[]\r\n\t\t\telements: ElementDef[]\r\n\t\t}[]\r\n\t}\r\n\tevents: EventDef[]\r\n}\r\n\r\nexport interface ElementDef {\r\n\tfieldId?: string,\r\n\ttype: string,\r\n\tchildren?: Array<ElementDef>\r\n\tshowIf?: string[]\r\n\thidden: boolean\r\n\tlabel?: string\r\n}\r\n\r\nexport interface FieldDef extends ElementDef {\r\n\tvalidation?: Array<string | ValidationConstraintDef>\r\n\tshowIf?: string[]\r\n\thidden: boolean\r\n\tdescription?: string\r\n\tinfo?: string\r\n}\r\n\r\nexport type ValidationConstraintDef = ValidationRuleDef | ValidationExpresionDef\r\n\r\nexport function isValidationExpresionDef(constraint: ValidationConstraintDef): constraint is ValidationExpresionDef {\r\n\treturn (constraint as ValidationExpresionDef).expression !== undefined\r\n}\r\n\r\nexport interface ValidationRuleDef {\r\n\tname: string,\r\n\targuments?: string[],\r\n\tmessage?: string\r\n}\r\n\r\nexport interface ValidationExpresionDef {\r\n\tname: string,\r\n\texpression: string,\r\n\tmessage?: string\r\n}\r\n\r\nexport interface ReferenceDataDef {\r\n\tinline?: {\r\n\t\t[name: string]: any\r\n\t}\r\n\thttp?: {\r\n\t\tname: string,\r\n\t\turl: string,\r\n\t\tmethod?: 'get' | 'GET' | 'post' | 'POST',\r\n\t\tbaseURL?: string\r\n\t}[]\r\n}\r\n\r\n","import React from 'react'\r\nimport {List} from './collection/List'\r\nimport {Autocomplete} from './input/Autocomplete'\r\nimport {ButtonGroup} from './input/ButtonGroup'\r\nimport {Dropdown} from './input/Dropdown'\r\nimport {TextInput} from './input/TextInput'\r\nimport {Heading} from './output/Heading'\r\nimport {Paragraph} from './output/Paragraph'\r\nimport {TextOutput} from './output/TextOutput'\r\nimport {Accordion} from './pagination/Accordion'\r\nimport {Tabs} from './pagination/Tabs'\r\n\r\ninterface FormElementTypesMap {\r\n\t[type: string]: React.ReactNode\r\n}\r\n\r\nexport const formElementNonCollectionTypes: FormElementTypesMap = {\r\n\t'accordion': Accordion,\r\n\t'dropdown': Dropdown,\r\n\t'textInput': TextInput,\r\n\t'heading': Heading,\r\n\t'paragraph': Paragraph,\r\n\t'buttonGroup': ButtonGroup,\r\n\t'tabs': Tabs,\r\n\t'autocomplete': Autocomplete,\r\n\t'textOutput': TextOutput\r\n}\r\n\r\nexport const formElementCollectionTypes: FormElementTypesMap = {\r\n\t'list': List\r\n}\r\n\r\nexport const formElementTypes: FormElementTypesMap = {...formElementNonCollectionTypes, ...formElementCollectionTypes}\r\n\r\nexport function lookupElement(type: string): React.ReactNode {\r\n\tconst foundType = formElementTypes[type]\r\n\tif (!foundType) {\r\n\t\tconsole.warn('Could not find form element type:' + type)\r\n\t\treturn () => <div>Could not find form element type <code>{type}</code>.</div>\r\n\t}\r\n\treturn foundType\r\n}\r\n\r\nexport function isTypeACollection(type: string): boolean {\r\n\treturn formElementCollectionTypes.hasOwnProperty(type)\r\n}","import React from 'react'\r\n\r\ninterface LabelProps {\r\n\ttext: string,\r\n\thtmlFor: string,\r\n\terror?: boolean\r\n}\r\n\r\nexport const Label = (props: LabelProps) => <label htmlFor={props.htmlFor} className={'mr-2 ' + (props.error ? 'text-danger' : '')}>{props.text}</label>","import React from 'react'\r\nimport {FieldDef} from '../FormDef'\r\nimport {useValidation} from '../hooks/useValidation'\r\nimport {Description} from './Description'\r\nimport {Label} from './Label'\r\n\r\n\r\ninterface FieldChromeProps {\r\n\tpath: string\r\n\tdef: FieldDef\r\n}\r\n\r\nexport const FieldChrome: React.FC<FieldChromeProps> = (props) => {\r\n\tconst error = useValidation().validateAndShouldShow(props.path, props.def)\r\n\r\n\treturn <div className=\"form-group pt-1\">\r\n\t\t{props.def.label && <Label htmlFor={props.path} text={props.def.label} error={!!error}/>}\r\n\t\t{props.children}\r\n\t\t{error && <div className=\"error-message text-danger pt-2\">{error}</div>}\r\n\t\t{props.def.description && <Description path={props.path} text={props.def.description}/>}\r\n\t</div>\r\n}","import axios from 'axios'\r\nimport {ReferenceDataDef} from '../FormDef'\r\nimport {useStore} from './useStore'\r\n\r\ninterface ReferenceData {\r\n\t[name: string]: any\r\n}\r\n\r\nconst REFERENCE_DATA_STORE_KEY = 'referenceData'\r\n\r\nexport const useReferenceData = () => {\r\n\tconst {set, get} = useStore()\r\n\r\n\treturn {\r\n\t\treferenceData: get<ReferenceData>(REFERENCE_DATA_STORE_KEY),\r\n\t\tsetReferenceData: (name: string, data: any) => {\r\n\t\t\tset(`${REFERENCE_DATA_STORE_KEY}.name`, data)\r\n\t\t},\r\n\t\tsetupReferenceData: (referenceDataDef: ReferenceDataDef = {}) => {\r\n\t\t\treferenceDataDef.http!.forEach(httpReferenceDataDef => {\r\n\t\t\t\taxios(httpReferenceDataDef)\r\n\t\t\t\t\t.then(function (response) {\r\n\t\t\t\t\t\tset(`${REFERENCE_DATA_STORE_KEY}.${httpReferenceDataDef.name}`, response.data)\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z\"\n});\n\nvar SvgSearch = function SvgSearch(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSearch, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/search.bf4782c8.svg\";\nexport { ForwardRef as ReactComponent };","import React, {KeyboardEvent, useEffect, useRef, useState} from 'react'\r\nimport {Manager, Popper, Reference} from 'react-popper'\r\nimport {Description} from '../../display/Description'\r\nimport {FieldChrome} from '../../display/FieldChrome'\r\nimport {Label} from '../../display/Label'\r\nimport {useFieldState} from '../../hooks/useFieldState'\r\nimport {SuggestDef, useSuggestion} from '../../hooks/useSuggestion'\r\nimport {ReactComponent as Search} from '../../svg/octicons/search.svg'\r\nimport {ChildFormElements} from '../ChildFormElements'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\nexport interface AutocompleteDef extends SuggestDef {\r\n\tlabel: string\r\n\tdescription: string\r\n\tmanualDescription: string\r\n\tinfo?: string\r\n\tpostfixSearchIcon?: boolean\r\n\tshowSwitchToManualEntryLink: boolean\r\n\tswitchToManualEntryLinkLabel?: string\r\n\tswitchToSuggestLinkLabel?: string\r\n}\r\n\r\nconst defDefaults: Partial<AutocompleteDef> = {\r\n\toptions: [],\r\n\tmultiple: false,\r\n\tlabelKey: 'label',\r\n\tvalueKey: 'value',\r\n\tpostfixSearchIcon: true\r\n}\r\n\r\nexport const Autocomplete = (props: FormElementProps<AutocompleteDef>) => {\r\n\tconst def = {...defDefaults, ...props.def}\r\n\r\n\tconst {focus, blur, getFieldState, setShowManualEntryForSuggestion} = useFieldState()\r\n\tconst {inputValue, inputChanged, suggestions, showSuggestions, clear, selectOption} = useSuggestion(props.path, props.def)\r\n\tconst [cursor, setCursor] = useState<number>(-1)\r\n\r\n\tconst inputContainerRef = useRef<HTMLDivElement>(null)\r\n\tconst suggestionsContainerRef = useRef<HTMLDivElement>(null)\r\n\r\n\tconst showManualEntryForSuggestion = getFieldState(props.path).showManualEntryForSuggestion\r\n\r\n\tuseEffect(() => {\r\n\t\tif (showSuggestions && suggestions && suggestions.length > 0) {\r\n\t\t\tinputContainerRef.current!.scrollIntoView()\r\n\t\t}\r\n\t}, [showSuggestions, suggestions])\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.body.addEventListener('touchend', handlePotentialOutsideClick!)\r\n\t\tdocument.body.addEventListener('click', handlePotentialOutsideClick!)\r\n\t\treturn () => {\r\n\t\t\tdocument.body.removeEventListener('touchend', handlePotentialOutsideClick!)\r\n\t\t\tdocument.body.removeEventListener('click', handlePotentialOutsideClick!)\r\n\t\t}\r\n\t})\r\n\r\n\tconst handlePotentialOutsideClick = (event: Event) => {\r\n\t\tif (!showManualEntryForSuggestion\r\n\t\t\t&& inputContainerRef && !inputContainerRef.current!.contains(event.target as Node)\r\n\t\t\t&& suggestionsContainerRef && !suggestionsContainerRef.current!.contains(event.target as Node)) {\r\n\t\t\tclear()\r\n\t\t}\r\n\t}\r\n\tconst handleInputChange = (changedValue: string) => {\r\n\t\tinputChanged(changedValue)\r\n\t\tsetCursor(-1)\r\n\t}\r\n\tconst handleSelectionClicked = (option: any) => {\r\n\t\tselectOption(option)\r\n\t\tsetCursor(-1)\r\n\t}\r\n\tconst handleBlur = () => {\r\n\t\tblur(props.path)\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst newTarget = document.activeElement\r\n\t\t\tif (!inputContainerRef.current!.contains(newTarget) && !suggestionsContainerRef.current!.contains(newTarget)) {\r\n\t\t\t\tclear()\r\n\t\t\t}\r\n\t\t}, 1)// Have to wait 1 ms so that document.activeElement is not body\r\n\t}\r\n\tconst handleFocus = () => {\r\n\t\tfocus(props.path)\r\n\t\tif (inputValue && inputValue.length > 0) {\r\n\t\t\thandleInputChange(inputValue)\r\n\t\t}\r\n\t}\r\n\tconst handleInputKeyDown = (event: KeyboardEvent) => {\r\n\t\tif (event.keyCode === 38 && cursor > 0) { // up\r\n\t\t\tsetCursor(cursor - 1)\r\n\t\t} else if (event.keyCode === 40 && cursor < suggestions.length - 1) { // down\r\n\t\t\tsetCursor(cursor + 1)\r\n\t\t} else if (event.keyCode === 13 && cursor >= 0 && cursor < suggestions.length) { // enter\r\n\t\t\tselectOption(suggestions[cursor])\r\n\t\t} else if (event.keyCode === 27) { // esc\r\n\t\t\tclear()\r\n\t\t}\r\n\t}\r\n\r\n\tif (!showManualEntryForSuggestion) {\r\n\t\treturn <>\r\n\t\t\t<FieldChrome path={props.path} def={props.def}>\r\n\t\t\t\t<Manager>\r\n\t\t\t\t\t<Reference>\r\n\t\t\t\t\t\t{({ref}) => (<div ref={inputContainerRef} className=\"input-group\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tref={ref}\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\t\tid={props.path}\r\n\t\t\t\t\t\t\t\t\taria-describedby={props.path + '_description'}\r\n\t\t\t\t\t\t\t\t\tvalue={inputValue || ''}\r\n\t\t\t\t\t\t\t\t\tonChange={event => handleInputChange(event.target.value)}\r\n\t\t\t\t\t\t\t\t\tonKeyDown={handleInputKeyDown}\r\n\t\t\t\t\t\t\t\t\tonFocus={handleFocus}\r\n\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{def.postfixSearchIcon && <div className=\"input-group-append\" onClick={() => inputChanged(inputValue)}>\r\n\t\t\t\t\t\t\t<span className=\"input-group-text\">\r\n\t\t\t\t\t\t\t\t<Search className=\"search-icon\"/>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Reference>\r\n\t\t\t\t\t<Popper placement=\"bottom-start\">\r\n\t\t\t\t\t\t{({ref, style, placement}) => (\r\n\t\t\t\t\t\t\t<div ref={suggestionsContainerRef}>\r\n\t\t\t\t\t\t\t\t<div ref={ref} style={style} className=\"popper\" data-placement={placement}>\r\n\t\t\t\t\t\t\t\t\t{showSuggestions && suggestions && suggestions.length > 0 && <div className=\"dropdown-menu show\">\r\n\t\t\t\t\t\t\t\t\t\t{suggestions.map((suggestion, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet value\r\n\t\t\t\t\t\t\t\t\t\t\tlet label\r\n\t\t\t\t\t\t\t\t\t\t\tif (typeof suggestion === 'string') {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue = suggestion\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel = suggestion\r\n\t\t\t\t\t\t\t\t\t\t\t} else if (typeof suggestion === 'object') {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue = def.valueKey && suggestion[def.valueKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel = def.labelKey && suggestion[def.labelKey]\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn <button className={'dropdown-item' + (cursor === index ? ' active' : '')} key={value + label} onClick={() => handleSelectionClicked(suggestion)}>{label}</button>\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Popper>\r\n\t\t\t\t</Manager>\r\n\t\t\t</FieldChrome>\r\n\t\t\t{def.showSwitchToManualEntryLink &&\r\n\t\t\t<button className=\"btn btn-link pt-0 pl-0 manual-entry-link\" onClick={() => setShowManualEntryForSuggestion(props.path, true)}>{def.switchToManualEntryLinkLabel}</button>}\r\n\t\t</>\r\n\t} else {\r\n\t\treturn <div className=\"form-group pt-2\">\r\n\t\t\t{props.def.label && <Label htmlFor={props.path} text={props.def.label}/>}\r\n\t\t\t{props.def.children && <div className=\"card\">\r\n\t\t\t\t<div className=\"card-body\">\r\n\t\t\t\t\t<button className=\"btn btn-link pt-0 pl-0 pb-1 mt-n1\" onClick={() => setShowManualEntryForSuggestion(props.path, false)}>{def.switchToSuggestLinkLabel}</button>\r\n\t\t\t\t\t<ChildFormElements parentPath={props.path} childFormElements={props.def.children}/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>}\r\n\t\t\t{props.def.manualDescription && <Description path={props.path} text={props.def.manualDescription}/>}\r\n\t\t</div>\r\n\t}\r\n}","import {findLastIndex} from 'lodash-es'\r\nimport {useState} from 'react'\r\nimport {ElementDef} from '../FormDef'\r\nimport {useConfig} from './useConfig'\r\nimport {useFormState} from './useFormState'\r\nimport {useShowIf} from './useShowIf'\r\nimport {useSubmit} from './useSubmit'\r\nimport {useValidation} from './useValidation'\r\n\r\nexport const usePagination = () => {\r\n\tconst {config} = useConfig()\r\n\tconst {hasErrorsRecursively} = useValidation()\r\n\tconst {nextClicked, clearNextClicked, submitClicked} = useFormState()\r\n\tconst {shouldShow} = useShowIf()\r\n\tconst {submitting, submit} = useSubmit()\r\n\r\n\tconst [path, setPath] = useState<string>('')\r\n\tconst [pages, setPages] = useState<ElementDef[]>([])\r\n\tconst [currentPageIndex, setCurrentPageIndex] = useState<number>(-1)\r\n\r\n\tconst firstShownPage = pages.findIndex(page => shouldShow(path, page))\r\n\tconst lastShownPage = findLastIndex(pages, page => shouldShow(path, page))\r\n\r\n\tconst currentIsFirst = currentPageIndex === firstShownPage\r\n\tconst currentIsLast = currentPageIndex === lastShownPage\r\n\r\n\tconst currentPageHasErrors = () => hasErrorsRecursively(path, pages[currentPageIndex])\r\n\tconst disableNext = config.disableNextWhenErrors && currentPageHasErrors()\r\n\r\n\r\n\treturn {\r\n\t\tsetUp: (path: string, setupPages: ElementDef[]) => {\r\n\t\t\tsetPath(path)\r\n\t\t\tsetPages(setupPages)\r\n\t\t\tif (currentPageIndex < 0) {\r\n\t\t\t\tsetCurrentPageIndex(setupPages.findIndex(page => shouldShow(path, page)))\r\n\t\t\t}\r\n\t\t},\r\n\t\tnextClicked: () => {\r\n\t\t\tif (currentPageHasErrors()) {\r\n\t\t\t\tnextClicked()\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = currentPageIndex + 1; i < pages.length; i++) {\r\n\t\t\t\t\tconst pageDef = pages[i]\r\n\t\t\t\t\tif (pageDef && shouldShow(path, pageDef)) {\r\n\t\t\t\t\t\tclearNextClicked()\r\n\t\t\t\t\t\tsetCurrentPageIndex(i)\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tpreviousClicked: () => {\r\n\t\t\tfor (let i = currentPageIndex - 1; i >= 0; i--) {\r\n\t\t\t\tconst pageDef = pages[i]\r\n\t\t\t\tif (pageDef && shouldShow(path, pageDef)) {\r\n\t\t\t\t\tclearNextClicked()\r\n\t\t\t\t\tsetCurrentPageIndex(i)\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsubmitClicked: () => {\r\n\t\t\tif (currentPageHasErrors()) {\r\n\t\t\t\tsubmitClicked()\r\n\t\t\t} else {\r\n\t\t\t\tsubmit()\r\n\t\t\t}\r\n\t\t},\r\n\t\tcurrentPageIndex, setCurrentPageIndex, currentIsFirst, currentIsLast, currentPageHasErrors, disableNext, submitting\r\n\t}\r\n}","import axios from 'axios'\nimport {useFormDef} from './useFormDef'\nimport {useFormState} from './useFormState'\nimport {useValues} from './useValues'\n\nexport const useSubmit = () => {\n\tconst {formDef} = useFormDef()\n\tconst {values} = useValues()\n\tconst {formState, setFormState} = useFormState()\n\n\n\treturn {\n\t\tsubmitting: formState.submitting,\n\t\tsubmit: () => {\n\t\t\tsetFormState('submitting', true)\n\t\t\taxios.post(formDef.submit.url, values)\n\t\t\t\t.then(function (response) {\n\t\t\t\t\tconsole.log(response)\n\t\t\t\t\tsetFormState('submitting', false)\n\t\t\t\t\tsetFormState('submitResponse', response)\n\t\t\t\t\tconst outcomeIndex = formDef.submit.outcomes.findIndex((outcome) => {\n\t\t\t\t\t\tif (outcome.statusCodes.includes(response.status)) {\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false\n\t\t\t\t\t})\n\t\t\t\t\tsetFormState('outcomeIndex', outcomeIndex)\n\t\t\t\t}).catch(function (error) {\n\t\t\t\tsetFormState('submitError', error)\n\t\t\t\tconsole.error('error:', error)\n\t\t\t})\n\n\t\t}\n\t}\n}\n","import classNames from 'classnames'\r\nimport React, {useEffect, useRef} from 'react'\r\nimport {ElementDef} from '../../FormDef'\r\nimport {usePagination} from '../../hooks/usePagination'\r\nimport {useShowIf} from '../../hooks/useShowIf'\r\nimport {ChildFormElements} from '../ChildFormElements'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\n\r\nexport const Accordion = (props: FormElementProps) => {\r\n\tconst {shouldShow} = useShowIf()\r\n\tconst pagination = usePagination()\r\n\tconst currentPageRef = useRef<HTMLDivElement>(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tprops.def.children && pagination.setUp(props.path, props.def.children)\r\n\t})\r\n\r\n\tif (!props.def.children) {\r\n\t\treturn null\r\n\t}\r\n\r\n\r\n\tconst scrollCurrentPageIntoView = () => {\r\n\t\tif (currentPageRef && currentPageRef.current) {\r\n\t\t\twindow.scroll({top: currentPageRef.current.getBoundingClientRect().top - 100})\r\n\t\t}\r\n\t}\r\n\r\n\tconst goToPage = (index: number) => {\r\n\t\tpagination.setCurrentPageIndex(index)\r\n\t\tscrollCurrentPageIntoView()\r\n\t}\r\n\r\n\tconst previous = () => {\r\n\t\tpagination.previousClicked()\r\n\t\tscrollCurrentPageIntoView()\r\n\t}\r\n\r\n\tconst next = () => {\r\n\t\tpagination.nextClicked()\r\n\t\tscrollCurrentPageIntoView()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"accordion\" role=\"tablist\" aria-multiselectable=\"true\">\r\n\t\t\t{props.def.children!.map((page, index) => shouldShow(props.path, page) && <div className=\"card\" key={props.path + '_PAGE_' + index}>\r\n\t\t\t\t\t{pagination.currentPageIndex === index && <div ref={currentPageRef}/>}\r\n\t\t\t\t\t<div className=\"card-header cursor-pointer\" onClick={() => goToPage(index)}>\r\n\t\t\t\t\t\t<h3 className=\"d-inline\">{page.label}</h3>{index < pagination.currentPageIndex && <button className=\"link-button text-muted px-1\" onClick={() => goToPage(index)}><u>edit</u></button>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{pagination.currentPageIndex === index && <div className=\"card-body m-1\">\r\n\t\t\t\t\t\t{page.children && <ChildFormElements childFormElements={page.children as ElementDef[]} parentPath={props.parentPath}/>}\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t\t\t\t<nav aria-label=\"Page navigation\">\r\n\t\t\t\t\t\t\t\t\t<ul className=\"pagination mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t{!pagination.currentIsFirst && <li className=\"page-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button className=\"page-link\" onClick={previous}>Previous</button>\r\n\t\t\t\t\t\t\t\t\t\t</li>}\r\n\t\t\t\t\t\t\t\t\t\t{!pagination.currentIsLast && <li className={classNames('page-item', {disabled: pagination.disableNext})}>\r\n\t\t\t\t\t\t\t\t\t\t\t<button className=\"page-link\" onClick={next} disabled={pagination.disableNext}>Next</button>\r\n\t\t\t\t\t\t\t\t\t\t</li>}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{pagination.currentIsLast && <div className=\"col\">\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-right\" onClick={pagination.submitClicked}>Submit</button>\r\n\t\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react'\r\nimport {FieldChrome} from '../../display/FieldChrome'\r\nimport {FieldDef} from '../../FormDef'\r\nimport {useFieldState} from '../../hooks/useFieldState'\r\nimport {useReferenceData} from '../../hooks/useReferenceData'\r\nimport {useValues} from '../../hooks/useValues'\r\nimport {createKey} from '../../util'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\nexport interface DropdownDef extends FieldDef {\r\n\tinfo?: string\r\n\toptions?: string[]\r\n\treferenceDataOptions?: string\r\n}\r\n\r\ninterface Option {\r\n\tvalue: string | number,\r\n\tlabel: string\r\n}\r\n\r\ntype Data = string | number\r\n\r\nexport const Dropdown = (props: FormElementProps<DropdownDef>) => {\r\n\tconst referenceData = useReferenceData().referenceData\r\n\tconst {getValue, setValue} = useValues()\r\n\tconst {blur, focus} = useFieldState()\r\n\tlet options: Array<Option | Data> = props.def.options || []\r\n\tif (props.def.referenceDataOptions) {\r\n\t\toptions = options.concat(referenceData[props.def.referenceDataOptions])\r\n\t}\r\n\treturn <FieldChrome path={props.path} def={props.def}>\r\n\t\t<select\r\n\t\t\tclassName=\"form-control custom-select\"\r\n\t\t\tid={props.def.fieldId}\r\n\t\t\tvalue={getValue(props.path) || ''}\r\n\t\t\tonChange={event => setValue(props.path, event.currentTarget.value)}\r\n\t\t\taria-describedby={props.def.fieldId + '_description'}\r\n\t\t\tonFocus={() => focus(props.path)}\r\n\t\t\tonBlur={() => blur(props.path)}\r\n\t\t>\r\n\t\t\t<option value=\"\"/>\r\n\t\t\t{options.map((option) => {\r\n\t\t\t\tconst label = typeof option === 'object' ? option.label : option\r\n\t\t\t\tconst value = typeof option === 'object' ? option.value : option\r\n\t\t\t\treturn <option value={value} key={value || createKey()}>{label}</option>\r\n\t\t\t})}\r\n\t\t</select>\r\n\t</FieldChrome>\r\n}","import React from 'react'\r\nimport {FieldChrome} from '../../display/FieldChrome'\r\nimport {FieldDef} from '../../FormDef'\r\nimport {useFieldState} from '../../hooks/useFieldState'\r\nimport {useValues} from '../../hooks/useValues'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\ninterface TextInputDef extends FieldDef {\r\n}\r\n\r\nexport const TextInput = (props: FormElementProps<TextInputDef>) => {\r\n\tconst {getValue, setValue} = useValues()\r\n\tconst {blur, focus} = useFieldState()\r\n\r\n\treturn (<FieldChrome path={props.path} def={props.def}>\r\n\t\t<input\r\n\t\t\ttype=\"text\"\r\n\t\t\tclassName=\"form-control\"\r\n\t\t\tid={props.path}\r\n\t\t\taria-describedby={props.path + '_description'}\r\n\t\t\tvalue={getValue(props.path) || ''}\r\n\t\t\tonChange={event => setValue(props.path, event.currentTarget.value)}\r\n\t\t\tonFocus={() => focus(props.path)}\r\n\t\t\tonBlur={() => blur(props.path)}\r\n\t\t/>\r\n\t</FieldChrome>)\r\n}","import React from 'react'\nimport {FormElementProps} from '../FormElementProps'\n\ninterface HeadingAttributes {\n\tlevel: number\n\ttext: string\n}\n\nexport const Heading = (props: FormElementProps<HeadingAttributes>) =>\n\tReact.createElement('h' + props.def.level, null, props.def.text)","import React from 'react'\nimport {FormElementProps} from '../FormElementProps'\n\n\ninterface ParagraphAttributes {\n\ttext: string\n}\n\nexport const Paragraph = (props: FormElementProps<ParagraphAttributes>) => <p>{props.def.text}</p>","import React, {useState} from 'react'\r\nimport {FieldChrome} from '../../display/FieldChrome'\r\nimport {FieldDef} from '../../FormDef'\r\nimport {useFieldState} from '../../hooks/useFieldState'\r\n\r\nimport {useValues} from '../../hooks/useValues'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\ninterface ButtonGroupDef extends FieldDef {\r\n\tlabel: string\r\n\tdescription?: string\r\n\tinfo?: string\r\n\toptions: string[]\r\n}\r\n\r\nexport const ButtonGroup = (props: FormElementProps<ButtonGroupDef>) => {\r\n\tconst {setValue, getValue} = useValues()\r\n\tconst {blur, focus} = useFieldState()\r\n\tconst value = getValue(props.path)\r\n\tconst [buttonFocus, setButtonFocus] = useState<number | null>(null)\r\n\r\n\treturn (\r\n\t\t<FieldChrome path={props.path} def={props.def}>\r\n\t\t\t<div className=\"btn-group-wrapper\"\r\n\t\t\t\t onFocus={() => focus(props.path)}\r\n\t\t\t\t onBlur={() => blur(props.path)}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"btn-group btn-group-toggle\">\r\n\t\t\t\t\t{props.def.options.map((option, index) => (\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\tclassName={'btn btn-outline-primary' + (value === option ? ' active' : '') + (buttonFocus === index ? ' focus' : '')}\r\n\t\t\t\t\t\t\tkey={props.path + '_OPTION_' + option}\r\n\t\t\t\t\t\t\tonFocus={() => setButtonFocus(index)}\r\n\t\t\t\t\t\t\tonBlur={() => setButtonFocus(null)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tvalue={option}\r\n\t\t\t\t\t\t\t\tchecked={option === value}\r\n\t\t\t\t\t\t\t\tonChange={event => setValue(props.path, event.currentTarget.value)}\r\n\t\t\t\t\t\t\t/>{option}\r\n\t\t\t\t\t\t</label>))\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</FieldChrome>)\r\n}","import classNames from 'classnames'\r\nimport React, {useEffect, useRef} from 'react'\r\nimport {ElementDef} from '../../FormDef'\r\nimport {usePagination} from '../../hooks/usePagination'\r\nimport {useShowIf} from '../../hooks/useShowIf'\r\nimport {ChildFormElements} from '../ChildFormElements'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\ninterface TabsDef extends ElementDef {\r\n\tpill?: boolean\r\n}\r\n\r\n\r\nexport const Tabs = (props: FormElementProps<TabsDef>) => {\r\n\tconst {shouldShow} = useShowIf()\r\n\tconst pagination = usePagination()\r\n\tconst tabsRef = useRef<HTMLDivElement>(null)\r\n\r\n\t/* eslint-disable react-hooks/exhaustive-deps */\r\n\tuseEffect(() => {\r\n\t\tprops.def.children && pagination.setUp(props.path, props.def.children)\r\n\t}, [props.def, props.path])\r\n\t/* eslint-enable react-hooks/exhaustive-deps */\r\n\r\n\tuseEffect(() => {\r\n\t\tif (tabsRef && tabsRef.current && tabsRef.current.getBoundingClientRect().top < 0) {\r\n\t\t\ttabsRef.current.scrollIntoView()\r\n\t\t}\r\n\t}, [pagination.currentPageIndex])\r\n\r\n\tif (!props.def.children) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tif (pagination.currentPageIndex < 0) {\r\n\t\treturn null\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"card rounded-0\">\r\n\t\t\t<div className=\"card-header\" ref={tabsRef}>\r\n\t\t\t\t<ul className={'nav ' + (props.def.pill ? 'nav-pills card-header-pills' : 'nav-tabs card-header-tabs')}>\r\n\t\t\t\t\t{props.def.children!.map((page, index) => {\r\n\t\t\t\t\t\tif (!shouldShow(props.path, page)) {\r\n\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst key = props.path + '_PAGE_' + index\r\n\t\t\t\t\t\t//The bootstrap btn-link doesn't style the same as a link with a href when used as nav-link\r\n\t\t\t\t\t\t/* eslint-disable jsx-a11y/anchor-is-valid, no-script-url */\r\n\t\t\t\t\t\tif (index < pagination.currentPageIndex) {\r\n\t\t\t\t\t\t\treturn <li className=\"nav-item\" key={key}>\r\n\t\t\t\t\t\t\t\t<a className=\"nav-link\" href=\"javascript:void(0)\" onClick={() => pagination.setCurrentPageIndex(index)}>{page.label}</a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/* eslint-enable no-script-url, jsx-a11y/anchor-is-valid */\r\n\t\t\t\t\t\tif (index === pagination.currentPageIndex) {\r\n\t\t\t\t\t\t\treturn <li className=\"nav-item\" key={key}>\r\n\t\t\t\t\t\t\t\t<button className=\"nav-link active\">{page.label}</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (index > pagination.currentPageIndex) {\r\n\t\t\t\t\t\t\treturn <li className=\"nav-item\" key={key}>\r\n\t\t\t\t\t\t\t\t<button className=\"nav-link disabled\" tabIndex={-1} aria-disabled=\"true\">{page.label}</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn null\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"card-body\">\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<ChildFormElements childFormElements={props.def.children[pagination.currentPageIndex].children as ElementDef[]} parentPath={props.parentPath}/>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t\t\t<nav aria-label=\"Page navigation\">\r\n\t\t\t\t\t\t\t\t<ul className=\"pagination mb-0\">\r\n\t\t\t\t\t\t\t\t\t{!pagination.currentIsFirst && <li className=\"page-item\">\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"page-link\" onClick={pagination.previousClicked}>Previous</button>\r\n\t\t\t\t\t\t\t\t\t</li>}\r\n\t\t\t\t\t\t\t\t\t{!pagination.currentIsLast && <li className={classNames('page-item', {disabled: pagination.disableNext})}>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"page-link\" onClick={pagination.nextClicked} disabled={pagination.disableNext}>Next</button>\r\n\t\t\t\t\t\t\t\t\t</li>}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{pagination.currentIsLast && <div className=\"col\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary float-right\" onClick={pagination.submitClicked}>Submit</button>\r\n\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>)\r\n}","import axios from 'axios'\r\nimport {useEffect, useState} from 'react'\r\nimport {FieldDef} from '../FormDef'\r\nimport {useFieldState} from './useFieldState'\r\nimport {useReferenceData} from './useReferenceData'\r\nimport {useValues} from './useValues'\r\n\r\nexport interface SuggestDef extends FieldDef {\r\n\toptions?: any[]\r\n\treferenceDataOptions?: string\r\n\tmultiple?: boolean\r\n\tlabelKey?: string\r\n\tvalueKey?: string\r\n\tvalueIsWholeOption?: boolean\r\n\tvalueExpression?: string\r\n\thttp?: { url?: string }\r\n}\r\n\r\nexport function useSuggestion(path: string, def: SuggestDef) {\r\n\tconst {referenceData} = useReferenceData()\r\n\tconst {setValue, setValueExpression} = useValues()\r\n\tconst {getFieldState, setSelectedSuggestionLabel} = useFieldState()\r\n\tconst fieldState = getFieldState(path)\r\n\r\n\tconst [suggestions, setSuggestions] = useState<any[]>([])\r\n\tconst [httpSuggestions, setHttpSuggestions] = useState<any[]>([])\r\n\tconst [inlineSuggestions, setInlineSuggestions] = useState<any[]>([])\r\n\tconst [inputValue, setInputValue] = useState<string>(fieldState.selectedSuggestionLabel || '')\r\n\tconst [showSuggestions, setShowSuggestions] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetSuggestions(inlineSuggestions.concat(httpSuggestions))\r\n\t}, [inlineSuggestions, httpSuggestions])\r\n\r\n\tconst inputChanged = (newInputValue: string) => {\r\n\t\tsetInputValue(newInputValue)\r\n\t\tsetInlineSuggestions([])\r\n\t\tsetHttpSuggestions([])\r\n\t\tsetSuggestions([])\r\n\t\tconst lowerInputValue = newInputValue.trim().toLowerCase()\r\n\t\tconst lowerSelectedLabel = fieldState.selectedSuggestionLabel && fieldState.selectedSuggestionLabel.toLowerCase()\r\n\t\tif (lowerInputValue !== lowerSelectedLabel && lowerInputValue.length > 0) {\r\n\t\t\tconst referenceDataOptions = (def.referenceDataOptions && referenceData[def.referenceDataOptions]) || []\r\n\t\t\tconst fieldDefOption = def.options || []\r\n\t\t\tconst inlineOptions = referenceDataOptions.concat(fieldDefOption)\r\n\r\n\t\t\tconst matchingInlineOptions = inlineOptions.filter((option: any) => {\r\n\t\t\t\treturn JSON.stringify(option).toLowerCase().includes(lowerInputValue)\r\n\t\t\t})\r\n\r\n\t\t\tsetInlineSuggestions(matchingInlineOptions)\r\n\r\n\t\t\tif (def.http && def.http.url) {\r\n\t\t\t\taxios.get<any[]>(def.http.url + newInputValue)\r\n\t\t\t\t\t.then(function (response) {\r\n\t\t\t\t\t\tsetHttpSuggestions(response.data)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tsetShowSuggestions(true)\r\n\t\t}\r\n\t}\r\n\r\n\tconst clear = () => {\r\n\t\tsetShowSuggestions(false)\r\n\t}\r\n\r\n\tconst selectOption = (option: any) => {\r\n\t\tif (typeof option === 'string') {\r\n\t\t\tsetValue(path, option)\r\n\t\t\tsetSelectedSuggestionLabel(path, option)\r\n\t\t\tsetInputValue(option)\r\n\t\t} else if (typeof option === 'object') {\r\n\t\t\tif (def.valueIsWholeOption) {\r\n\t\t\t\tsetValue(path, option)\r\n\t\t\t} else if (def.valueExpression) {\r\n\t\t\t\tsetValueExpression(path, def, def.valueExpression, {option})\r\n\t\t\t} else if (def.valueKey) {\r\n\t\t\t\tsetValue(path, option[def.valueKey])\r\n\t\t\t}\r\n\t\t\tsetSelectedSuggestionLabel(path, option[def.labelKey || 'label'])\r\n\t\t\tsetInputValue(option[def.labelKey || 'label'])\r\n\r\n\t\t}\r\n\t\tsetShowSuggestions(false)\r\n\t}\r\n\r\n\treturn {inputValue, inputChanged, suggestions, showSuggestions, clear, selectOption}\r\n}","import React from 'react'\r\nimport {FieldDef} from '../../FormDef'\r\nimport {useExpression} from '../../hooks/useExpression'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\ninterface TextOutputDef extends FieldDef {\r\n\texpression?: string\r\n\tvalue?: string\r\n}\r\n\r\nexport const TextOutput = (props: FormElementProps<TextOutputDef>) => {\r\n\tconst {evaluate} = useExpression()\r\n\tif (props.def.expression) {\r\n\t\treturn <>{evaluate(props.def.expression, props.path, props.def)}</>\r\n\t}\r\n\tif (props.def.value) {\r\n\t\treturn <>{props.def.value}</>\r\n\t}\r\n}","import {times} from 'lodash-es'\r\nimport React from 'react'\r\nimport {Description} from '../../display/Description'\r\nimport {FieldDef} from '../../FormDef'\r\nimport {useValues} from '../../hooks/useValues'\r\nimport {ordinal} from '../../util'\r\nimport {ChildFormElements} from '../ChildFormElements'\r\nimport {FormElementProps} from '../FormElementProps'\r\n\r\n\r\nexport interface ListDef extends FieldDef {\r\n\titemLabel: string\r\n}\r\n\r\nexport const List = (props: FormElementProps<ListDef>) => {\r\n\tconst {getCollectionSize, addToCollection, deleteFromCollection} = useValues()\r\n\treturn (\r\n\t\t<div className=\"form-group\">\r\n\t\t\t<span className=\"h5 align-middle mr-2\">{props.def.label}</span>\r\n\t\t\t{props.def.description && <Description path={props.path} text={props.def.description}/>}\r\n\t\t\t{times(getCollectionSize(props.path), (index: number) =>\r\n\t\t\t\t<div className={'card border-bottom mb-3' + (index === 0 ? ' mt-2' : '')} key={props.path + '_COLLECTION_' + index}>\r\n\t\t\t\t\t<h6 className=\"card-header\">{ordinal(index + 1)} {props.def.itemLabel}\r\n\t\t\t\t\t\t<button className=\"close text-dark\" onClick={() => deleteFromCollection(props.path, index)} aria-label=\"close\">\r\n\t\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</h6>\r\n\t\t\t\t\t<div className=\"card-body pb-0\">\r\n\t\t\t\t\t\t{props.def.children && <ChildFormElements childFormElements={props.def.children} parentPath={props.path + '[' + index + ']'}/>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<button className=\"btn btn-primary d-inline\" onClick={() => addToCollection(props.path)}>Add</button>\r\n\t\t</div>)\r\n}\r\n","import React from 'react'\nimport {ElementDef, FieldDef} from '../FormDef'\nimport {useShowIf} from '../hooks/useShowIf'\nimport {createPath} from '../util'\nimport {FormElementProps} from './FormElementProps'\nimport {lookupElement} from './formElementTypes'\n\nexport const ChildFormElements: React.FC<{ childFormElements: (FieldDef | ElementDef)[], parentPath: string }> = (props) =>\n\t<div>\n\t\t{props.childFormElements.map((elementDef, index) => {\n\t\t\tconst path = createPath(props.parentPath, elementDef.fieldId)\n\t\t\treturn <ChildFormElement path={path} parentPath={props.parentPath} elementDef={elementDef} key={path + '_' + index}/>\n\t\t})}\n\t</div>\n\nconst ChildFormElement: React.FC<{ path: string, parentPath: string, elementDef: ElementDef }> = (props) => {\n\tconst {shouldShow} = useShowIf()\n\tif (!shouldShow(props.path, props.elementDef)) {\n\t\treturn null\n\t}\n\tconst Child: any = lookupElement(props.elementDef.type)\n\tconst childProps: FormElementProps = {\n\t\tdef: props.elementDef,\n\t\tparentPath: props.parentPath,\n\t\tpath: props.path\n\t}\n\treturn React.createElement(Child, childProps)\n}","import React, {useEffect} from 'react'\r\nimport FormDef from './FormDef'\r\nimport {ChildFormElements} from './formElements/ChildFormElements'\r\nimport {useConfig} from './hooks/useConfig'\r\nimport {useEvent} from './hooks/useEvent'\r\nimport {useFormDef} from './hooks/useFormDef'\r\nimport {useFormState} from './hooks/useFormState'\r\nimport {useReferenceData} from './hooks/useReferenceData'\r\n\r\nexport interface FormProps {\r\n\tformDef: FormDef\r\n}\r\n\r\nexport const Form: React.FC<FormProps> = (props) => {\r\n\tconst {setupFormDef} = useFormDef()\r\n\tconst {setupConfig} = useConfig()\r\n\tconst {setupReferenceData} = useReferenceData()\r\n\tconst {handleEvent} = useEvent()\r\n\r\n\t/* eslint-disable react-hooks/exhaustive-deps */\r\n\tuseEffect(() => {\r\n\t\tsetupFormDef(props.formDef)\r\n\t\tsetupConfig(props.formDef.config)\r\n\t\tsetupReferenceData(props.formDef.referenceData)\r\n\t}, [props.formDef])\r\n\r\n\tsetTimeout(() => {\r\n\t\thandleEvent('formLoaded')\r\n\t}, 1)\r\n\r\n\tconst outcomeIndex = useFormState().formState.outcomeIndex\r\n\tif (outcomeIndex != null) {\r\n\t\treturn <div className=\"outcome container\">\r\n\t\t\t<ChildFormElements childFormElements={props.formDef.submit.outcomes[outcomeIndex].elements} parentPath=\"\"/>\r\n\t\t</div>\r\n\t}\r\n\r\n\treturn <div className=\"form\">\r\n\t\t<ChildFormElements childFormElements={props.formDef.elements} parentPath=\"\"/>\r\n\t</div>\r\n}","//import 'react-app-polyfill/ie11'\r\nimport axios from 'axios'\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {Form} from './Form'\r\nimport FormDef from './FormDef'\r\nimport {StoreProvider} from './hooks/useStore'\r\n\r\nimport './index.css'\r\n\r\naxios.get<FormDef>('api/formDefinition/exampleFormDefinition.json')\r\n\t.then(function (response) {\r\n\t\tReactDOM.render(\r\n\t\t\t<StoreProvider>\r\n\t\t\t\t<Form formDef={response.data}/>\r\n\t\t\t</StoreProvider>,\r\n\t\t\tdocument.getElementById('form')\r\n\t\t)\r\n\t})"],"sourceRoot":""}